(()=>{"use strict";const e={onPlayerDeath:"armoury:onPlayerDeath",onPlayerAuthenticate:"authentication:player-authenticated",onPlayerDisconnect:"playerDropped",onResourceStop:"onResourceStop",onContextMenuItemPressed:"armoury-overlay:context-menu-item-pressed"};var t;!function(e){e[e.SERVER_TO_SERVER=0]="SERVER_TO_SERVER",e[e.SERVER_TO_CLIENT=1]="SERVER_TO_CLIENT",e[e.CLIENT_TO_SERVER=2]="CLIENT_TO_SERVER",e[e.CLIENT_TO_CLIENT=3]="CLIENT_TO_CLIENT"}(t||(t={}));const r=new Map,n=new Map;function o(n){return function(o,a,l){const i=e[a]||(null==n?void 0:n.eventName),s=(null==n?void 0:n.direction)||t.CLIENT_TO_SERVER;(null==i?void 0:i.length)?(r.has(o.constructor)||r.set(o.constructor,[]),r.get(o.constructor).some((([e,t,r])=>e===a))||r.get(o.constructor).push([a,i,s])):console.error(`${a} is not recognized as a default event, thus this listener won't work. Please use the eventName property inside the data parameter.`)}}var a=function(e,t,r,n){var o,a=arguments.length,l=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,r,n);else for(var i=e.length-1;i>=0;i--)(o=e[i])&&(l=(a<3?o(l):a>3?o(t,r,l):o(t,r))||l);return a>3&&l&&Object.defineProperty(t,r,l),l};let l=class extends class extends class extends class{constructor(){this.routingBucketCondition=(e,t)=>!0,this.assignServerBaseListeners()}RegisterAdminCommand(e,t,r,n){RegisterCommand(e,((e,n,o)=>{Number(global.exports.authentication.getPlayerInfo(e,"adminLevel"))<t||r(e,n,o)}),n)}assignServerBaseListeners(){onNet(`${GetCurrentResourceName()}:set-client-routing-bucket`,((e,t)=>{this.routingBucketCondition(e,t)&&SetEntityRoutingBucket(e,t)}))}}{removeClientsideVehicles(){TriggerClientEvent(`${GetCurrentResourceName()}:ARM_remove-vehicles`,-1)}}{}{onGeneralMenuOpened(e){global.exports["armoury-overlay"].showContextMenu(source,{title:"General Menu",id:"general-menu",items:[{label:"GPS",active:!0},{label:"Legitimation"},...e.length?[{label:"Vehicle"}]:[]]})}onGeneralMenuItemPress(e,t,r,n){var o,a,l,i,s;switch(e){case"general-menu":switch(t.label){case"Vehicle":{const e=global.exports.armoury.getVehiclesStillNearbyFrom(source,n);global.exports["armoury-overlay"].showContextMenu(source,{title:"General Menu: Vehicle",id:"general-menu-vehicle",items:e.map(((e,t)=>({active:0===t,label:e[1],metadata:{vehicleNetworkId:e[0]}})))});break}}break;case"general-menu-vehicle":if(!(null===(o=t.metadata)||void 0===o?void 0:o.vehicleNetworkId))return;global.exports.armoury.isVehicleNearbyPlayer(NetworkGetEntityFromNetworkId(null===(a=t.metadata)||void 0===a?void 0:a.vehicleNetworkId),source)&&global.exports["armoury-overlay"].showContextMenu(source,{title:"General Menu: Vehicle",id:"general-menu-vehicle-single",items:[{label:"Check trunk",active:!0,metadata:{id:"check-trunk"}},{label:"Open trunk",metadata:{id:"open-trunk"}},{label:"Close trunk",metadata:{id:"close-trunk"}}],metadata:{vehicleNetworkId:null===(l=t.metadata)||void 0===l?void 0:l.vehicleNetworkId}});case"general-menu-vehicle-single":if(!(null==r?void 0:r.vehicleNetworkId)||!(null===(i=t.metadata)||void 0===i?void 0:i.id))return;if(global.exports.armoury.isVehicleNearbyPlayer(NetworkGetEntityFromNetworkId(null==r?void 0:r.vehicleNetworkId),source))switch(null===(s=t.metadata)||void 0===s?void 0:s.id){case"check-trunk":emit("trunk:inspect-trunk",source,null==r?void 0:r.vehicleNetworkId);break;case"open-trunk":TriggerClientEvent("trunk:open-trunk",source,null==r?void 0:r.vehicleNetworkId);break;case"close-trunk":TriggerClientEvent("trunk:close-trunk",source,null==r?void 0:r.vehicleNetworkId)}}}};a([o({eventName:`${GetCurrentResourceName()}:open-general-menu`})],l.prototype,"onGeneralMenuOpened",null),a([o({eventName:`${GetCurrentResourceName()}:general-menu-item-press`})],l.prototype,"onGeneralMenuItemPress",null),l=a([function(e){return class extends e{constructor(...o){super(...o),r.has(e)&&r.get(e).forEach((([e,r,n])=>{n===t.CLIENT_TO_CLIENT?on(r,super[e].bind(this)):onNet(r,super[e].bind(this))})),n.has(e)&&n.get(e).forEach((e=>{exports(e,super[e].bind(this))}))}}}],l),new l})();