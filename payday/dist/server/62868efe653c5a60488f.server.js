(()=>{"use strict";const e={onAccountAuthenticate:"authentication:account-success",onPlayerConnect:"playerJoining",onPlayerDeath:"armoury:onPlayerDeath",onPlayerAuthenticate:"authentication:player-authenticated",onPlayerDisconnect:"playerDropped",onResourceStop:"onResourceStop",onContextMenuItemPressed:"armoury-overlay:context-menu-item-pressed",onPlayerEnterVehicle:"armoury:onPlayerEnterVehicle",onPlayerExitVehicle:"armoury:onPlayerExitVehicle",onPlayerClientsidedCacheLoaded:"armoury:player-resource-cache-loaded"};var t;!function(e){e[e.SERVER_TO_SERVER=0]="SERVER_TO_SERVER",e[e.SERVER_TO_CLIENT=1]="SERVER_TO_CLIENT",e[e.CLIENT_TO_SERVER=2]="CLIENT_TO_SERVER",e[e.CLIENT_TO_CLIENT=3]="CLIENT_TO_CLIENT"}(t||(t={}));const r=new Map,n=new Map,a=new Map;function o(e){return function(o){return class extends o{constructor(...s){super(...s),this.translationFile=null==e?void 0:e.translationFile,r.has(o)&&r.get(o).forEach((([e,r,n])=>{n===t.CLIENT_TO_CLIENT?on(r,super[e].bind(this)):onNet(r,super[e].bind(this))})),n.has(o)&&n.get(o).forEach((e=>{exports(e,super[e].bind(this))})),a.has(o)&&a.get(o).forEach((([e,t])=>{IsDuplicityVersion()?RegisterCommand(e.toLowerCase(),((r,n,a)=>{Number(global.exports.authentication.getPlayerInfo(r,"adminLevel"))<t||super[e].call(this,r,n,a)}),!1):RegisterCommand(e.toLowerCase(),((t,r,n)=>{super[e].call(this,r,n)}),!1)}))}}}}function s(n){return function(a,o,s){const i=e[o]||(null==n?void 0:n.eventName),l=(null==n?void 0:n.direction)||t.CLIENT_TO_SERVER;(null==i?void 0:i.length)?(r.has(a.constructor)||r.set(a.constructor,[]),r.get(a.constructor).some((([e,t,r])=>e===o))||r.get(a.constructor).push([o,i,l])):console.error(`${o} is not recognized as a default event, thus this listener won't work. Please use the eventName property inside the data parameter.`)}}var i=function(e,t,r,n){var a,o=arguments.length,s=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,r,n);else for(var i=e.length-1;i>=0;i--)(a=e[i])&&(s=(o<3?a(s):o>3?a(t,r,s):a(t,r))||s);return o>3&&s&&Object.defineProperty(t,r,s),s};let l=class extends class{constructor(){this.routingBucketCondition=(e,t)=>!0,this.assignServerBaseListeners()}RegisterAdminCommand(e,t,r,n){RegisterCommand(e,((e,n,a)=>{Number(global.exports.authentication.getPlayerInfo(e,"adminLevel"))<t||r(e,n,a)}),n)}assignServerBaseListeners(){onNet(`${GetCurrentResourceName()}:set-client-routing-bucket`,((e,t)=>{this.routingBucketCondition(e,t)&&SetEntityRoutingBucket(e,t)}))}setRoutingBucket(e,t){SetEntityRoutingBucket(GetPlayerPed(e),t),TriggerClientEvent(`${GetCurrentResourceName()}:set-routing-bucket`,e,t)}}{constructor(){super(...arguments),this._virtualWorldsWithPlayers=new Map}get virtualWorldsWithPlayers(){return this._virtualWorldsWithPlayers}onPlayerEnteredScope(e){TriggerClientEvent(`${GetCurrentResourceName()}:refresh-virtual-world`,e.for)}setPlayerVirtualWorld(e,t){const r=this.getPlayerVirtualWorld(e);isNaN(r)||this._virtualWorldsWithPlayers.set(r,(this._virtualWorldsWithPlayers.has(r)?this._virtualWorldsWithPlayers.get(r):[]).filter((t=>t!==e)));const n=[...this._virtualWorldsWithPlayers.has(t)?this._virtualWorldsWithPlayers.get(t):[],e];this._virtualWorldsWithPlayers.set(t,n),global.exports.authentication.setPlayerInfo(e,"virtualWorld",t)}getPlayerVirtualWorld(e){return Math.max(0,Number(global.exports.authentication.getPlayerInfo(e,"virtualWorld")))}removeClientsideVehicles(){TriggerClientEvent(`${GetCurrentResourceName()}:ARM_remove-vehicles`,-1)}};i([s({eventName:"playerEnteredScope"})],l.prototype,"onPlayerEnteredScope",null),l=i([o()],l);var c=function(e,t,r,n){var a,o=arguments.length,s=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,r,n);else for(var i=e.length-1;i>=0;i--)(a=e[i])&&(s=(o<3?a(s):o>3?a(t,r,s):a(t,r))||s);return o>3&&s&&Object.defineProperty(t,r,s),s};let u=class extends l{constructor(){super(...arguments),this._translationLanguage="ro",this._clientsidedResourceMap=new Map}get translationLanguage(){return this._translationLanguage}get clientsidedResourceMap(){return this._clientsidedResourceMap}getPlayerClientsidedCacheKey(e,t){if(this._clientsidedResourceMap.has(e)){const r=this._clientsidedResourceMap.get(e);if(r[t])return r[t]}return null}updatePlayerClientsidedCacheKey(e,t,r){const n=this._clientsidedResourceMap.has(e)&&this._clientsidedResourceMap.get(e)||{};n[t]=r,this._clientsidedResourceMap.set(e,n),TriggerClientEvent("armoury-overlay:update-resource-metadata",e,GetCurrentResourceName(),t,r)}onPlayerClientsidedCacheLoaded(e){e[GetCurrentResourceName()]&&this._clientsidedResourceMap.set(source,e[GetCurrentResourceName()])}onPlayerDisconnect(){this._clientsidedResourceMap.has(source)&&this._clientsidedResourceMap.delete(source)}translate(e,t){let r=this.translationFile[this._translationLanguage][e];return t&&Object.keys(t).forEach((e=>{r=r.replace(`{${e}}`,t[e])})),r}setTranslationLanguage(e){this._translationLanguage=e}};c([s()],u.prototype,"onPlayerClientsidedCacheLoaded",null),c([s()],u.prototype,"onPlayerDisconnect",null),u=c([o()],u);const d=e=>e.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",");let h=class extends u{constructor(){super(),this.assignListeners()}assignListeners(){this.paydayInterval=setInterval((()=>{var e,t,r;if(0===(new Date).getMinutes()){const n=global.exports.businesses.getEntities(),a=global.exports.authentication.getAuthenticatedPlayers(),o=new Map([["electricity",(null===(e=n.find((e=>"Electricity Company"===e.name)))||void 0===e?void 0:e.productPrice)||100],["gas",(null===(t=n.find((e=>"Gas Company"===e.name)))||void 0===t?void 0:t.productPrice)||100],["phone",(null===(r=n.find((e=>"Phone Company"===e.name)))||void 0===r?void 0:r.productPrice)||100]]);a.forEach((e=>{var t,r;const a=(null===(t=global.exports.houses.getEntities().find((t=>t.owner===GetPlayerName(e))))||void 0===t?void 0:t.firstPurchasePrice)||0,s=Math.floor(Number(5e-4*a)),i=(null===(r=n.find((t=>t.owner===GetPlayerName(e))))||void 0===r?void 0:r.firstPurchasePrice)||0,l=Number(5e-4*i),c=Math.floor(1e3+1e3*Math.random()),u=Math.max(0,Math.floor(1e-6*Number(global.exports.authentication.getPlayerInfo(e,"bank")))),h=0-(a>0?o.get("electricity"):0)-(a>0?o.get("gas"):0)-(a>0?s:0)-(i>0?o.get("electricity"):0)-(i>0?l:0)-0-0-o.get("phone");u>0&&global.exports.banking.addBankMoney(e,u,"Interest","Based on your savings",!0),global.exports.banking.addBankMoney(e,h,"Taxes","Services and insurances",!0),global.exports.banking.addBankMoney(e,c,"Payday","Your latest paycheck",!0);const g={gainings:[{name:"salary",value:"$"+d(c)},{name:"interest",value:`$${d(u)}`}],taxes:[{name:"house-energy",value:"-$"+d(o.get("electricity"))},{name:"house-gas",value:"-$"+d(o.get("gas"))},{name:"house-contributions",value:"-$"+d(s)},{name:"business-energy",value:"-$"+d(o.get("electricity"))},{name:"business-contributions",value:"-$"+d(l)},{name:"vehicle-insurance",value:"-$"+d(0)},{name:"vehicle-contributions",value:"-$"+d(0)},{name:"other_utilities-phone_service",value:"-$"+d(o.get("phone"))}],finalStats:[{name:"days",value:d(Number(Number(global.exports.authentication.getPlayerInfo(e,"hoursPlayed")).toFixed(1)))},{name:"new_balance",value:"$"+d(Number(global.exports.authentication.getPlayerInfo(e,"bank")))}]};TriggerClientEvent(`${GetCurrentResourceName()}:payday-given`,e,g)}))}}),6e4),onNet("onResourceStop",(e=>{e===GetCurrentResourceName()&&clearInterval(this.paydayInterval)}))}};h=function(e,t,r,n){var a,o=arguments.length,s=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,r,n);else for(var i=e.length-1;i>=0;i--)(a=e[i])&&(s=(o<3?a(s):o>3?a(t,r,s):a(t,r))||s);return o>3&&s&&Object.defineProperty(t,r,s),s}([o()],h),new h})();