(()=>{"use strict";var e={147:e=>{e.exports=require("fs")}},t={};function r(s){var n=t[s];if(void 0!==n)return n.exports;var o=t[s]={exports:{}};return e[s](o,o.exports,r),o.exports}(()=>{const e={onPlayerDeath:"armoury:onPlayerDeath",onPlayerAuthenticate:"authentication:player-authenticated",onPlayerDisconnect:"playerDropped"};var t;!function(e){e[e.SERVER_TO_SERVER=0]="SERVER_TO_SERVER",e[e.SERVER_TO_CLIENT=1]="SERVER_TO_CLIENT",e[e.CLIENT_TO_SERVER=2]="CLIENT_TO_SERVER",e[e.CLIENT_TO_CLIENT=3]="CLIENT_TO_CLIENT"}(t||(t={}));const s=[];var n=function(e,t,r,s){var n,o=arguments.length,i=o<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,r):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,r,s);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(i=(o<3?n(i):o>3?n(t,r,i):n(t,r))||i);return o>3&&i&&Object.defineProperty(t,r,i),i};const o=r(147);let i=class extends class extends class extends class{constructor(){this.routingBucketCondition=(e,t)=>!0,this.assignServerBaseListeners()}RegisterAdminCommand(e,t,r,s){RegisterCommand(e,((e,s,n)=>{Number(global.exports.authentication.getPlayerInfo(e,"adminLevel"))<t||r(e,s,n)}),s)}assignServerBaseListeners(){onNet(`${GetCurrentResourceName()}:set-client-routing-bucket`,((e,t)=>{this.routingBucketCondition(e,t)&&SetEntityRoutingBucket(e,t)}))}}{removeClientsideVehicles(){TriggerClientEvent(`${GetCurrentResourceName()}:ARM_remove-vehicles`,-1)}}{}{constructor(){super(),this._players=[],this.registerCommands(),this.registerFiveMEventListeners(),this.registerListeners(),this.registerExports(),this._players=[]}onPlayerDeath(e){console.log("players:",this._players)}registerCommands(){RegisterCommand("pos",((e,t)=>{let r=[],s=[];0!==GetVehiclePedIsIn(GetPlayerPed(e),!0)?(r=GetEntityCoords(GetVehiclePedIsIn(GetPlayerPed(e),!1),!0),s=GetEntityRotation(GetVehiclePedIsIn(GetPlayerPed(e),!1),2)):(r=GetEntityCoords(GetPlayerPed(e),!0),s=GetEntityRotation(GetPlayerPed(e),2));const n=`${r.map((e=>Number(e.toString()).toFixed(4))).join(",")},${s.map((e=>Number(e.toString()))).join(",")}`;console.log(`Source position is ${n}`),o.appendFile("savedpositions.txt",`\n${n} ${t.slice().shift()}`,(()=>{}))}),!1)}registerListeners(){onNet(`${GetCurrentResourceName()}:open-general-menu`,(()=>{global.exports["armoury-overlay"].showContextMenu(source,{title:"General Menu",id:"general-menu",items:[{label:"GPS",active:!0},{label:"Legitimation"}]})}))}registerFiveMEventListeners(){onNet("playerJoining",((e,t)=>{this._players.push(source)})),onNet("playerDropped",(e=>{this._players=this._players.filter((e=>e!==source))}))}getPlayers(){return this._players}registerExports(){exports("getPlayers",this.getPlayers.bind(this))}};n([function(r,n,o){const i=e[n]||void 0,a=t.CLIENT_TO_SERVER;(null==i?void 0:i.length)?s.push([n,i,a]):console.error(`${n} is not recognized as a default event, thus this listener won't work. Please use the eventName property inside the data parameter.`)}],i.prototype,"onPlayerDeath",null),i=n([function(e){return class extends e{constructor(...e){super(...e),console.log("event listeners:",s),s.forEach((([e,r,s])=>{s===t.CLIENT_TO_CLIENT?on(r,super[e].bind(this)):onNet(r,super[e].bind(this))}))}}}],i),new i})()})();