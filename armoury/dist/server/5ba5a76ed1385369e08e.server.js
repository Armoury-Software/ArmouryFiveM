(()=>{"use strict";var e,t;(t=e||(e={}))[t.SERVER_TO_SERVER=0]="SERVER_TO_SERVER",t[t.SERVER_TO_CLIENT=1]="SERVER_TO_CLIENT",t[t.CLIENT_TO_SERVER=2]="CLIENT_TO_SERVER",t[t.CLIENT_TO_CLIENT=3]="CLIENT_TO_CLIENT";const r=new Map,s=new Map,n=new Map;function i(){return function(e,t,r){s.has(e.constructor)||s.set(e.constructor,[]),s.get(e.constructor).some((e=>e===t))||s.get(e.constructor).push(t)}}var o=function(e,t,r,s){var n,i=arguments.length,o=i<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,r):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,r,s);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(o=(i<3?n(o):i>3?n(t,r,o):n(t,r))||o);return i>3&&o&&Object.defineProperty(t,r,o),o};let a=class extends class extends class extends class{constructor(){this.routingBucketCondition=(e,t)=>!0,this.assignServerBaseListeners()}RegisterAdminCommand(e,t,r,s){RegisterCommand(e,((e,s,n)=>{Number(global.exports.authentication.getPlayerInfo(e,"adminLevel"))<t||r(e,s,n)}),s)}assignServerBaseListeners(){onNet(`${GetCurrentResourceName()}:set-client-routing-bucket`,((e,t)=>{this.routingBucketCondition(e,t)&&SetEntityRoutingBucket(e,t)}))}}{removeClientsideVehicles(){TriggerClientEvent(`${GetCurrentResourceName()}:ARM_remove-vehicles`,-1)}}{}{constructor(){super(),this._players=[],this.registerFiveMEventListeners(),this.registerExports(),this.registerTimers(),this._players=[],SetRoutingBucketPopulationEnabled(0,!1)}isVehicleNearbyPlayer(e,t,r=3.5){const s=GetEntityCoords(GetPlayerPed(t),!0),n=GetEntityCoords(e,!0);return o=(i=[s[0],s[1],s[2],n[0],n[1],n[2]])[3]-i[0],a=i[4]-i[1],c=i[5]-i[2],Math.hypot(o,a,c)<=r;var i,o,a,c}getVehiclesStillNearbyFrom(e,t){return t.filter((t=>this.isVehicleNearbyPlayer(NetworkGetEntityFromNetworkId(t[0]),e)))}registerFiveMEventListeners(){onNet("playerJoining",((e,t)=>{this._players.push(source)})),onNet("playerDropped",(e=>{this._players=this._players.filter((e=>e!==source))}))}getPlayers(){return this._players}registerExports(){exports("getPlayers",this.getPlayers.bind(this))}registerTimers(){const e=new Date;TriggerClientEvent(`${GetCurrentResourceName()}:update-time`,-1,e.getHours(),e.getMinutes(),e.getSeconds()),setInterval((()=>{const e=new Date;TriggerClientEvent(`${GetCurrentResourceName()}:update-time`,-1,e.getHours(),e.getMinutes(),e.getSeconds())}),6e4)}};o([i()],a.prototype,"isVehicleNearbyPlayer",null),o([i()],a.prototype,"getVehiclesStillNearbyFrom",null),a=o([function(t){return class extends t{constructor(...i){super(...i),r.has(t)&&r.get(t).forEach((([t,r,s])=>{s===e.CLIENT_TO_CLIENT?on(r,super[t].bind(this)):onNet(r,super[t].bind(this))})),s.has(t)&&s.get(t).forEach((e=>{exports(e,super[e].bind(this))})),n.has(t)&&n.get(t).forEach((([e,t])=>{RegisterCommand(e.toLowerCase(),((r,s,n)=>{Number(global.exports.authentication.getPlayerInfo(r,"adminLevel"))<t||super[e].call(this,r,s,n)}),!1)}))}}}],a),new a})();