(()=>{"use strict";var e={};e.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}();const t={onAccountAuthenticate:"authentication:account-success",onPlayerConnect:"playerJoining",onPlayerDeath:"armoury:onPlayerDeath",onPlayerAuthenticate:"authentication:player-authenticated",onPlayerDisconnect:"playerDropped",onResourceStop:"onResourceStop",onContextMenuItemPressed:"armoury-overlay:context-menu-item-pressed",onPlayerEnterVehicle:"armoury:onPlayerEnterVehicle",onPlayerExitVehicle:"armoury:onPlayerExitVehicle",onPlayerClientsidedCacheLoaded:"armoury:player-resource-cache-loaded",onPlayerStartTowVehicle:"armoury:onPlayerStartTowVehicle",onPlayerStopTowVehicle:"armoury:onPlayerStopTowVehicle"};var i;!function(e){e[e.SERVER_TO_SERVER=0]="SERVER_TO_SERVER",e[e.SERVER_TO_CLIENT=1]="SERVER_TO_CLIENT",e[e.CLIENT_TO_SERVER=2]="CLIENT_TO_SERVER",e[e.CLIENT_TO_CLIENT=3]="CLIENT_TO_CLIENT"}(i||(i={}));const n=new Map,o=new Map,r=new Map;function s(t){return function(s){return class extends s{constructor(...a){super(...a),this.translationFile=null==t?void 0:t.translationFile,n.has(s)&&n.get(s).forEach((([e,t,n])=>{n===i.CLIENT_TO_CLIENT?on(t,super[e].bind(this)):onNet(t,super[e].bind(this))})),o.has(s)&&o.get(s).forEach((e=>{exports(e,super[e].bind(this))})),r.has(s)&&r.get(s).forEach((([t,i])=>{IsDuplicityVersion()?RegisterCommand(((null==i?void 0:i.isKeyBinding)?"+":"")+t.toLowerCase(),((n,o,r)=>{(null==i?void 0:i.adminLevelRequired)&&Number(e.g.exports.authentication.getPlayerInfo(n,"adminLevel"))<(null==i?void 0:i.adminLevelRequired)||super[t].call(this,n,o,r)}),!1):RegisterCommand(((null==i?void 0:i.isKeyBinding)?"+":"")+t.toLowerCase(),((e,i,n)=>{super[t].call(this,i,n)}),!1)}))}}}}function a(e){return function(o,r,s){const a=t[r]||(null==e?void 0:e.eventName),c=(null==e?void 0:e.direction)||i.CLIENT_TO_SERVER;(null==a?void 0:a.length)?(n.has(o.constructor)||n.set(o.constructor,[]),n.get(o.constructor).some((([e,t,i])=>e===r))||n.get(o.constructor).push([r,a,c])):console.error(`${r} is not recognized as a default event, thus this listener won't work. Please use the eventName property inside the data parameter.`)}}const c={0:[255,255,255],1:[224,50,50],2:[93,189,113],3:[93,182,229],4:[255,255,255],5:[238,198,78],6:[194,80,80],7:[156,110,175],8:[254,122,195],9:[245,157,121],10:[177,143,131],11:[141,206,167],12:[112,168,174],13:[211,209,231],14:[143,126,152],15:[106,196,191],16:[213,195,152],17:[234,142,80],18:[151,202,233],19:[178,98,135],20:[143,141,121],21:[166,117,94],22:[175,168,168],23:[231,141,154],24:[187,214,91],25:[12,123,86],26:[122,195,254],27:[171,60,230],28:[205,168,12],29:[69,97,171],30:[41,165,184],31:[184,155,123],32:[200,224,254],33:[240,240,150],34:[237,140,161],35:[249,138,138],36:[251,238,165],37:[255,255,255],38:[40,96,160],39:[145,131,112],40:[76,76,76],41:[242,157,157],42:[108,183,214],43:[175,237,174],44:[255,167,95],45:[241,241,241],46:[236,240,41],47:[255,154,24],48:[246,68,165],49:[224,58,58],50:[138,109,227],51:[255,127,70],52:[49,96,65],53:[179,221,243],54:[58,100,121],55:[160,160,160],56:[132,114,50],57:[101,185,231],58:[75,65,117],59:[225,59,59],60:[240,203,88],61:[205,63,152],62:[207,207,207],63:[39,106,159],64:[216,123,27],65:[142,131,147],66:[240,203,87],67:[101,185,231],68:[101,185,231],69:[121,205,121],70:[239,202,87],71:[239,202,87],72:[61,61,61],73:[239,202,87],74:[73,168,231],75:[224,50,50],76:[120,35,35],77:[101,185,231],78:[58,100,121],79:[224,50,50],80:[101,185,231],81:[242,164,12],82:[164,204,170],83:[168,84,242],84:[101,185,231],85:[61,61,61]},l=e=>new Promise((t=>setTimeout(t,e))),h=e=>{var t=e[3]-e[0],i=e[4]-e[1],n=e[5]-e[2];return Math.hypot(t,i,n)};var d=function(e,t,i,n){var o,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(r<3?o(s):r>3?o(t,i,s):o(t,i))||s);return r>3&&s&&Object.defineProperty(t,i,s),s},u=function(e,t,i,n){return new(i||(i=Promise))((function(o,r){function s(e){try{c(n.next(e))}catch(e){r(e)}}function a(e){try{c(n.throw(e))}catch(e){r(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(s,a)}c((n=n.apply(e,t||[])).next())}))};let p=class extends class{constructor(){this.tickInstance=null,this.tickFunctions=[],this.routingBucket=0,this.assignBaseListeners()}addToTick(...e){e.forEach((e=>{-1!==this.tickFunctions.findIndex((t=>t.id===e.id))&&console.error(`[ClientBase]: A tick function with the id ${e.id} already exists in the stack! The newly added tick function will not be executed.`)})),this.tickFunctions.push(...e),this.removeTickDuplicates(),this.refreshTicks()}addToTickUnique(...e){e.forEach((e=>{this.removeFromTick(e.id)})),this.addToTick(...e)}removeFromTick(e){this.tickFunctions=this.tickFunctions.filter((t=>t.id!=e))}refreshTicks(){this.tickInstance&&(clearTick(this.tickInstance),this.tickInstance=null),this.tickFunctions.length>0&&(this.tickInstance=setTick((()=>{if(!this.tickFunctions.length)return clearTick(this.tickInstance),void(this.tickInstance=null);this.tickFunctions.forEach((e=>{e.function()}))})))}removeTickDuplicates(){this.tickFunctions=this.tickFunctions.filter((e=>this.tickFunctions.findIndex((t=>t.id==e.id))==this.tickFunctions.indexOf(e)))}assignBaseListeners(){onNet(`${GetCurrentResourceName()}:set-routing-bucket`,(e=>{this.routingBucket=e}))}setEntityRoutingBucket(e){TriggerServerEvent(`${GetCurrentResourceName()}:set-client-routing-bucket`,e),this.routingBucket=e}getPlayerInfo(t,i){let n=GetConvar(`${i||e.g.GetPlayerServerId(e.g.PlayerId())}_PI_${t}`,"-1");var o;return o=n.toString(),!/^\s*$/.test(o)&&(o=(o=(o=o.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@")).replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]")).replace(/(?:^|:|,)(?:\s*\[)+/g,""),/^[\],:{}\s]*$/.test(o))&&(n=JSON.parse(n.toString(),(function(e,t){return"object"==typeof t||isNaN(t)?t:Number(t)}))),n}}{constructor(){super(),this._blips=[],this._markers=[],this._vehicles=[],this._peds=[],this._waypoints=[],this._checkpoints=new Map,this.assignDefaultEntityListeners()}get blips(){return this._blips}get markers(){return this._markers}get vehicles(){return this._vehicles}get peds(){return this._peds}get waypoints(){return this._waypoints}get checkpoints(){return this._checkpoints}createBlips(e){const t=e.map((e=>Object.assign(Object.assign({},e),{instance:null})));this._blips.push(...t),this.refreshBlips()}createBlip(e){var t;const i=e.type&&"coords"!==e.type?"range"===e.type?AddBlipForRadius(e.pos[0],e.pos[1],e.pos[2],e.scale||1):AddBlipForEntity(null!==(t=e.entityId)&&void 0!==t?t:PlayerPedId()):AddBlipForCoord(e.pos[0],e.pos[1],e.pos[2]);return e.type&&"range"===e.type||SetBlipScale(i,e.scale||1),SetBlipSprite(i,e.id),SetBlipDisplay(i,4),SetBlipColour(i,e.color),SetBlipAlpha(i,e.alpha||255),SetBlipAsShortRange(i,!e.longRange),BeginTextCommandSetBlipName("STRING"),AddTextComponentString(e.title),EndTextCommandSetBlipName(i),i}clearBlip(e){this._blips=this._blips.filter((t=>t.instance!==e)),DoesBlipExist(e)&&RemoveBlip(e)}clearBlips(){this._blips.forEach((e=>{RemoveBlip(e.instance)})),this._blips=[]}refreshBlips(){this.blips.forEach((e=>{e.instance||(e.instance=this.createBlip(e))}))}createWaypoint(e,t,i,n,o,r=3){const s=GetCurrentResourceName().replace("-"," "),a=`${s.slice(0,1).toUpperCase()}${s.slice(1)}`,l=this.createBlip({id:n||1,color:i||69,title:t||a,pos:e,longRange:!0});return this.createCheckpoint(2,e[0],e[1],e[2],null,null,null,r,c[i][0],c[i][1],c[i][2],255,0),-1!==o&&(SetBlipRoute(l,!0),o&&SetBlipRouteColour(l,o)),this._waypoints.push(l),l}clearWaypoints(){this._waypoints.forEach((e=>{this.clearWaypoint(e,!0)})),this._waypoints=[]}clearWaypoint(e,t=!1){this.clearCheckpointByPosition(GetBlipCoords(e)),SetBlipRoute(e,!1),RemoveBlip(e),t||this._waypoints.splice(this._waypoints.indexOf(e),1)}createCheckpoint(e,t,i,n,o,r,s,a,c,l,h,d,u){const p=CreateCheckpoint(e,t,i,n,o,r,s,a,c,l,h,d,u);return this._checkpoints.set(p,[t,i,n,o,r,s]),p}clearCheckpoint(e){DeleteCheckpoint(e),this._checkpoints.has(e)&&this._checkpoints.delete(e)}clearCheckpointByPosition(e){const t=Array.from(this._checkpoints.keys()).find((t=>Math.floor(this._checkpoints.get(t)[0])===Math.floor(e[0])&&Math.floor(this._checkpoints.get(t)[1])===Math.floor(e[1])&&Math.floor(this._checkpoints.get(t)[2])===Math.floor(e[2])));t&&this.clearCheckpoint(t)}createMarkers(e){const t=e.map((e=>Object.assign(Object.assign({},e),{instance:null})));this._markers.push(...t)}clearMarkers(){this._markers=[]}createVehicleAsync(e,t,i,n,o,r,s,a=!1){return u(this,void 0,void 0,(function*(){let c=0;for(RequestModel(e);!HasModelLoaded(e);){if(c>10)return 0;yield l(100),c++}const h=CreateVehicle(e,t,i,n,o,r,s);return h&&(s&&this._vehicles.push(h),a&&TaskWarpPedIntoVehicle(GetPlayerPed(-1),h,-1)),h}))}removeVehicle(e){DoesEntityExist(e)&&DeleteEntity(e),this._vehicles.indexOf(e)>-1&&this._vehicles.splice(this._vehicles.indexOf(e),1)}removePed(e){DoesEntityExist(e)&&DeleteEntity(e),this._peds.indexOf(e)>-1&&this._peds.splice(this._peds.indexOf(e),1)}createPedInsideVehicleAsync(e,t,i,n,o,r){return u(this,void 0,void 0,(function*(){let s=0;for(RequestModel(i);!HasModelLoaded(i);){if(s>10)return 0;yield l(100),s++}const a=CreatePedInsideVehicle(e,t,i,n,o,r);return a&&this._peds.push(a),a}))}createPedAsync(e,t,i,n,o,r,s,a){return u(this,void 0,void 0,(function*(){let c=0;for(RequestModel(t);!HasModelLoaded(t);){if(c>10)return 0;yield l(100),c++}const h=CreatePed(e,t,i,n,o,r,s,a);return h&&this._peds.push(h),h}))}playAnimForPed(e,t,i,n,o=0,r=8,s=8){return u(this,void 0,void 0,(function*(){let a=0;for(RequestAnimDict(t);!HasAnimDictLoaded(t);){if(a>10)return;yield l(100),a++}HasAnimDictLoaded(t)&&TaskPlayAnim(e,t,i,r,s,n,o,0,!1,!1,!1)}))}setPedModelAsync(e,t){return u(this,void 0,void 0,(function*(){let i=0;for(RequestModel(t);!HasModelLoaded(t);){if(i>10)return!1;yield l(100),i++}SetPlayerModel(e,t),SetModelAsNoLongerNeeded(t)}))}assignDefaultEntityListeners(){onNet("onResourceStop",(e=>{e===GetCurrentResourceName()&&(this._vehicles.forEach((e=>{this.removeVehicle(e)})),this._peds.forEach((e=>{this.removePed(e)})),this._vehicles=[],this._peds=[])}))}onRefreshPlayersInVirtualWorld(){GetActivePlayers().forEach((e=>{const t=GetPlayerServerId(e);this.getPlayerInfo("virtualWorld")===this.getPlayerInfo("virtualWorld",t)?NetworkConcealPlayer(e,!1,!1):NetworkConcealPlayer(e,!0,!1)}))}};d([a({eventName:`${GetCurrentResourceName()}:refresh-virtual-world`})],p.prototype,"onRefreshPlayersInVirtualWorld",null),p=d([s()],p);var y=function(e,t,i,n){var o,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(r<3?o(s):r>3?o(t,i,s):o(t,i))||s);return r>3&&s&&Object.defineProperty(t,i,s),s};let P=class extends p{constructor(){super(...arguments),this.chunkRadius=75,this._actionPoints={},this._cachedPlayerPosition=[NaN,NaN],this._cachedPlayerRoundedPosition=[NaN,NaN],this._cachedIsPlayerInAnyVehicle=!1}get actionPoints(){return this._actionPoints}get cachedPlayerPosition(){return this._cachedPlayerPosition}createMarkers(e){super.createMarkers(e),this.createActionPoints(...e.map((e=>({id:`${GetCurrentResourceName()}_marker_${e.pos[0]}_${e.pos[1]}`,pos:e.pos,range:e.renderDistance,action:()=>{return t=this,i=void 0,o=function*(){var t,i,n;if(e.textureDict&&!HasStreamedTextureDictLoaded(e.textureDict))for(RequestStreamedTextureDict(e.textureDict,!0);!HasStreamedTextureDictLoaded(e.textureDict);)yield l(100);DrawMarker(e.marker,e.pos[0],e.pos[1],e.pos[2],0,0,0,(null===(t=e.rotation)||void 0===t?void 0:t[0])||0,(null===(i=e.rotation)||void 0===i?void 0:i[1])||0,(null===(n=e.rotation)||void 0===n?void 0:n[2])||0,e.scale,e.scale,e.scale,e.rgba[0],e.rgba[1],e.rgba[2],e.rgba[3],!1,!0,2,!1,e.textureDict||null,e.textureName||null,!1),e.underlyingCircle&&DrawMarker(e.underlyingCircle.marker,e.pos[0],e.pos[1],e.pos[2]-.9,0,0,0,0,0,0,e.underlyingCircle.scale,e.underlyingCircle.scale,e.underlyingCircle.scale,e.underlyingCircle.rgba[0]||e.rgba[0],e.underlyingCircle.rgba[1]||e.rgba[1],e.underlyingCircle.rgba[2]||e.rgba[2],e.underlyingCircle.rgba[3]||e.rgba[3],!1,!0,2,!1,null,null,!1)},new((n=void 0)||(n=Promise))((function(e,r){function s(e){try{c(o.next(e))}catch(e){r(e)}}function a(e){try{c(o.throw(e))}catch(e){r(e)}}function c(t){var i;t.done?e(t.value):(i=t.value,i instanceof n?i:new n((function(e){e(i)}))).then(s,a)}c((o=o.apply(t,i||[])).next())}));var t,i,n,o}}))))}clearMarkers(){this.markers.forEach((e=>{this.clearActionPoint(`${GetCurrentResourceName()}_marker_${e.pos[0]}_${e.pos[1]}`)})),super.clearMarkers()}createActionPoints(...e){e.forEach((e=>{this.createActionPoint(e)}))}createActionPoint(e){const t=this.roundToNearest(e.pos[0],this.chunkRadius),i=this.roundToNearest(e.pos[1],this.chunkRadius);this._actionPoints[t]||(this._actionPoints[t]={}),this.actionPoints[t][i]||(this._actionPoints[t][i]=[]),this._actionPoints[t][i].push(e)}clearActionPoint(e){Object.keys(this._actionPoints).forEach((t=>{Object.keys(this._actionPoints[t]).forEach((i=>{this._actionPoints[t][i]=this._actionPoints[t][i].filter((t=>t.id!=e))}))}))}clearActionPoints(){this._actionPoints={},this.removeFromTick(`${GetCurrentResourceName()}_actionpoints`)}removeActionPoint(e){var t,i;(null===(i=null===(t=this._actionPoints[this.roundToNearest(e.pos[0],this.chunkRadius)])||void 0===t?void 0:t[this.roundToNearest(e.pos[1],this.chunkRadius)])||void 0===i?void 0:i.length)&&(this._actionPoints[this.roundToNearest(e.pos[0],this.chunkRadius)][this.roundToNearest(e.pos[1],this.chunkRadius)]=this._actionPoints[this.roundToNearest(e.pos[0],this.chunkRadius)][this.roundToNearest(e.pos[1],this.chunkRadius)].filter((t=>t.id!=e.id)))}onThreadTriggered(e){var t,i;if("chunk-checker"===e){this._cachedPlayerPosition=GetEntityCoords(PlayerPedId(),!0);const[e,n]=[this.roundToNearest(this._cachedPlayerPosition[0],this.chunkRadius),this.roundToNearest(this._cachedPlayerPosition[1],this.chunkRadius)];if(this._cachedPlayerRoundedPosition[0]==e&&this._cachedPlayerRoundedPosition[1]==n)return;this._cachedPlayerRoundedPosition=[e,n],this._cachedIsPlayerInAnyVehicle=IsPedInAnyVehicle(PlayerPedId(),!1),(null===(i=null===(t=this._actionPoints[this._cachedPlayerRoundedPosition[0]])||void 0===t?void 0:t[this._cachedPlayerRoundedPosition[1]])||void 0===i?void 0:i.length)?this.addToTickUnique({id:`${GetCurrentResourceName()}_actionpoints`,function:()=>{var e,t,i,n;for(let o=0;o<(null===(t=null===(e=this._actionPoints[this._cachedPlayerRoundedPosition[0]])||void 0===e?void 0:e[this._cachedPlayerRoundedPosition[1]])||void 0===t?void 0:t.length);o++){const e=null===(i=this._actionPoints[this._cachedPlayerRoundedPosition[0]])||void 0===i?void 0:i[this._cachedPlayerRoundedPosition[1]][o];if(h([e.pos[0],e.pos[1],e.pos[2],this._cachedPlayerPosition[0],this._cachedPlayerPosition[1],e.pos[2]])<=(e.range||1)+(this._cachedIsPlayerInAnyVehicle&&!e.onfootOnly?5:0)){const t=(!e.onceIf||e.onceIf())&&(!e.onfootOnly||!IsPedInAnyVehicle(PlayerPedId(),!1))&&(!e.inVehicleOnly||IsPedInAnyVehicle(PlayerPedId(),!1));t&&e.action(),(e.once||e.onceIf)&&t&&(null===(n=this._actionPoints[this._cachedPlayerRoundedPosition[0]])||void 0===n||n[this._cachedPlayerRoundedPosition[1]].splice(o,1),o--)}}}}):this.removeFromTick(`${GetCurrentResourceName()}_actionpoints`)}}debug_ActionPoints(e){var t,i;let n=0;const o=(null===(i=null===(t=this.actionPoints[this.roundToNearest(this._cachedPlayerPosition[0],this.chunkRadius)])||void 0===t?void 0:t[this.roundToNearest(this._cachedPlayerPosition[1],this.chunkRadius)])||void 0===i?void 0:i.length)||0;Object.keys(this.actionPoints).forEach((e=>{Object.keys(this.actionPoints[e]).forEach((t=>{n+=this.actionPoints[e][t].length}))})),console.log(`Total action points: ${n}. Action points in this area: ${o}`)}roundToNearest(e,t){return Math.round(e/t)*t}};y([a({eventName:"armoury:thread-triggerer",direction:i.CLIENT_TO_CLIENT})],P.prototype,"onThreadTriggered",null),y([function(e,t,i){r.has(e.constructor)||r.set(e.constructor,[]),r.get(e.constructor).some((([e,i])=>e===t))||r.get(e.constructor).push([t,{}])}],P.prototype,"debug_ActionPoints",null),P=y([s()],P);class g extends P{addToFeed(e=8e3,...t){t.forEach(((t,i)=>{setTimeout((()=>{BeginTextCommandThefeedPost("STRING"),AddTextComponentSubstringPlayerName(t),EndTextCommandThefeedPostTicker(!1,!0)}),i*e)}))}}class f extends g{constructor(){super(...arguments),this._translationLanguage="en"}get translationLanguage(){return this._translationLanguage}translate(e,t){let i=this.translationFile[this._translationLanguage][e];return t&&Object.keys(t).forEach((e=>{i=i.replace(`{${e}}`,t[e])})),i}setTranslationLanguage(e){this._translationLanguage=e}}var v=function(e,t,i,n){var o,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(r<3?o(s):r>3?o(t,i,s):o(t,i))||s);return r>3&&s&&Object.defineProperty(t,i,s),s};let m=class extends f{constructor(){super(),this.vehicleBeingTowedEntity=NaN,this.assignListeners(),this.registerGlobalEvents()}assignListeners(){const e=[247.83297729492188,-343.20001220703125,44.4615478515625,0,0,158.7401580810547];on("onClientGameTypeStart",(()=>{globalThis.exports.spawnmanager.setAutoSpawnCallback((()=>{globalThis.exports.spawnmanager.spawnPlayer({x:e[0],y:e[1],z:e[2],model:"mp_m_freemode_01"},(()=>{SetEntityRotation(GetPlayerPed(-1),e[3],e[4],e[5],2,!0)}))})),globalThis.exports.spawnmanager.setAutoSpawn(!0),globalThis.exports.spawnmanager.forceRespawn()}))}registerGlobalEvents(){on("gameEventTriggered",((e,t)=>{switch(e){case"CEventNetworkEntityDamage":{const[e,i,n,o,r,s,a,c,l,h,d,u,p]=t;e===GetPlayerPed(-1)&&s&&(TriggerServerEvent(`${GetCurrentResourceName()}:onPlayerDeath`),emit(`${GetCurrentResourceName()}:onPlayerDeath`),emit("authentication:spawn-player",[-450.3632,-341.0537,34.50175,0,0]));break}case"CEventNetworkPlayerEnteredVehicle":{const[e,i]=t;if(128===e){let e=GetSeatPedIsTryingToEnter(PlayerPedId());-1!==e&&GetPedInVehicleSeat(i,-1)===PlayerPedId()&&(e=-1),-1!==e&&IsVehicleSeatFree(i,-1)?setTimeout((()=>{this.beginInsideVehicleInterval(i,e,!0)}),500):this.beginInsideVehicleInterval(i,e)}}}}))}findNearVehicles(){const e=[],t=GetEntityCoords(GetPlayerPed(-1),!0);let[i,n]=FindFirstVehicle(0),o=!0;for(;o;){let[n,r]=FindNextVehicle(i);if(o=n,NetworkDoesEntityExistWithNetworkId(NetworkGetNetworkIdFromEntity(r))){const i=GetEntityCoords(r,!0);h([t[0],t[1],t[2],i[0],i[1],i[2]])<3.5&&e.push([VehToNet(r),GetDisplayNameFromVehicleModel(GetEntityModel(r))])}}return EndFindObject(i),e}onSecondPassedWhileUsingTowTruck(e){if(this.playerTowingVehicleInterval){const t=null!=e?e:GetEntityAttachedToTowTruck(GetVehiclePedIsIn(PlayerPedId(),!1));t&&!this.vehicleBeingTowedEntity&&(this.vehicleBeingTowedEntity=t,TriggerServerEvent(`${GetCurrentResourceName()}:onPlayerStartTowVehicle`,NetworkGetNetworkIdFromEntity(t)),emit(`${GetCurrentResourceName()}:onPlayerStartTowVehicle`,NetworkGetNetworkIdFromEntity(t))),!t&&this.vehicleBeingTowedEntity&&(TriggerServerEvent(`${GetCurrentResourceName()}:onPlayerStopTowVehicle`),emit(`${GetCurrentResourceName()}:onPlayerStopTowVehicle`),this.vehicleBeingTowedEntity=NaN)}}beginInsideVehicleInterval(e,t,i=!1){let n=t;i&&(n=GetSeatPedIsTryingToEnter(PlayerPedId()),-1!==n&&(n=GetPedInVehicleSeat(e,-1)===PlayerPedId()?-1:n),-1!==n&&(n=t)),TriggerServerEvent(`${GetCurrentResourceName()}:onPlayerEnterVehicle`,NetworkGetNetworkIdFromEntity(e),n),emit(`${GetCurrentResourceName()}:onPlayerEnterVehicle`,NetworkGetNetworkIdFromEntity(e),n),this.playerLeftVehicleInterval||(this.playerLeftVehicleInterval=setInterval((()=>this.onSecondPassedWhileStillInVehicle()),1e3));const o=[GetHashKey("towtruck"),GetHashKey("towtruck2")];!this.playerTowingVehicleInterval&&o.includes(GetEntityModel(e))&&(this.playerTowingVehicleInterval=setInterval((()=>this.onSecondPassedWhileUsingTowTruck()),100))}onSecondPassedWhileStillInVehicle(){if(this.playerLeftVehicleInterval){const e=GetVehiclePedIsIn(PlayerPedId(),!0);GetVehiclePedIsIn(PlayerPedId(),!1)||(TriggerServerEvent(`${GetCurrentResourceName()}:onPlayerExitVehicle`,NetworkGetNetworkIdFromEntity(e),GetLastPedInVehicleSeat(e,-1)===PlayerPedId()),emit(`${GetCurrentResourceName()}:onPlayerExitVehicle`),clearInterval(this.playerLeftVehicleInterval),this.playerLeftVehicleInterval=null,this.playerTowingVehicleInterval&&(this.onSecondPassedWhileUsingTowTruck(NaN),clearInterval(this.playerTowingVehicleInterval),this.playerTowingVehicleInterval=null))}}onClockUpdated(e,t,i){NetworkOverrideClockTime(e,t,i)}};v([function(e,t,i){o.has(e.constructor)||o.set(e.constructor,[]),o.get(e.constructor).some((e=>e===t))||o.get(e.constructor).push(t)}],m.prototype,"findNearVehicles",null),v([a({eventName:`${GetCurrentResourceName()}:update-time`})],m.prototype,"onClockUpdated",null),m=v([s()],m),new m})();