(()=>{"use strict";const e=[{pos:[577.9251,-18.79347,76.62801]},{pos:[586.5524,-19.61459,76.62801]},{pos:[578.553,-15.55355,76.62801]},{pos:[586.3697,-16.86214,76.62811]},{pos:[587.265,-13.01979,76.62811]},{pos:[579.4193,-12.0735,76.62801]},{pos:[588.0157,-9.427725,76.62811]},{pos:[580.2449,-8.572096,76.62811]},{pos:[588.2698,-6.424401,76.62811]},{pos:[580.4944,-5.28456,76.62811]}],t=[586.3898,.6835891,76.62813];new class extends class extends class extends class{constructor(){this.routingBucketCondition=(e,t)=>!0,this.assignServerBaseListeners()}RegisterAdminCommand(e,t,a,s){RegisterCommand(e,((e,s,i)=>{Number(global.exports.authentication.getPlayerInfo(e,"adminLevel"))<t||a(e,s,i)}),s)}assignServerBaseListeners(){onNet(`${GetCurrentResourceName()}:set-client-routing-bucket`,((e,t)=>{this.routingBucketCondition(e,t)&&SetEntityRoutingBucket(e,t)}))}}{removeClientsideVehicles(){TriggerClientEvent(`${GetCurrentResourceName()}:ARM_remove-vehicles`,-1)}}{}{constructor(){super(),this.jailedPlayers=new Map,this.assignTimers(),this.registerExports(),this.assignListeners()}updateJailUI(e){global.exports["armoury-overlay"].setMessage(e,{id:"jail-time",content:`Jail time left: ${Math.floor(this.jailedPlayers.get(e)/60)} min`+(this.jailedPlayers.get(e)%60!=0?` ${this.jailedPlayers.get(e)%60} sec`:"")})}removeJailUI(e){global.exports["armoury-overlay"].deleteMessage(e,{id:"jail-time"})}jailPlayer(t){let a;a=global.exports.authentication.getPlayerInfo(t,"jailTime")?global.exports.authentication.getPlayerInfo(t,"jailTime"):180*global.exports.authentication.getPlayerInfo(t,"wantedLevel"),this.jailedPlayers.set(t,a);const s=e[Math.floor(Math.random()*e.length)].pos;SetEntityCoords(GetPlayerPed(t),s[0],s[1],s[2],!0,!1,!1,!1),global.exports.authentication.setPlayerInfo(t,"wantedLevel",0),global.exports.authentication.setPlayerInfo(t,"jailTime",a)}unJailPlayer(e){this.jailedPlayers.delete(e),global.exports.authentication.setPlayerInfo(e,"jailTime",0),SetEntityCoords(GetPlayerPed(e),t[0],t[1],t[2],!0,!1,!1,!1),this.removeJailUI(e)}assignTimers(){setInterval((()=>{Array.from(this.jailedPlayers.keys()).forEach((e=>{this.updateJailUI(e),this.jailedPlayers.set(e,this.jailedPlayers.get(e)-1),global.exports.authentication.setPlayerInfo(e,"jailTime",this.jailedPlayers.get(e)),0===this.jailedPlayers.get(e)&&this.unJailPlayer(e)}))}),1e3)}assignListeners(){onNet("authentication:player-authenticated",(e=>{console.log(global.exports.authentication.getPlayerInfo(e,"jailTime")),global.exports.authentication.getPlayerInfo(e,"jailTime")>0&&this.jailPlayer(e)})),on("playerDropped",(e=>{this.jailedPlayers.has(source)&&this.jailedPlayers.delete(source)}))}registerExports(){exports("jailPlayer",this.jailPlayer.bind(this)),exports("unJailPlayer",this.unJailPlayer.bind(this))}}})();