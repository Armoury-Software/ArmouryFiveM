(()=>{"use strict";var e={187:e=>{var t,i="object"==typeof Reflect?Reflect:null,n=i&&"function"==typeof i.apply?i.apply:function(e,t,i){return Function.prototype.apply.call(e,t,i)};t=i&&"function"==typeof i.ownKeys?i.ownKeys:Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:function(e){return Object.getOwnPropertyNames(e)};var s=Number.isNaN||function(e){return e!=e};function r(){r.init.call(this)}e.exports=r,e.exports.once=function(e,t){return new Promise((function(i,n){function s(i){e.removeListener(t,r),n(i)}function r(){"function"==typeof e.removeListener&&e.removeListener("error",s),i([].slice.call(arguments))}y(e,t,r,{once:!0}),"error"!==t&&function(e,t,i){"function"==typeof e.on&&y(e,"error",t,{once:!0})}(e,s)}))},r.EventEmitter=r,r.prototype._events=void 0,r.prototype._eventsCount=0,r.prototype._maxListeners=void 0;var o=10;function a(e){if("function"!=typeof e)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof e)}function c(e){return void 0===e._maxListeners?r.defaultMaxListeners:e._maxListeners}function l(e,t,i,n){var s,r,o,l;if(a(i),void 0===(r=e._events)?(r=e._events=Object.create(null),e._eventsCount=0):(void 0!==r.newListener&&(e.emit("newListener",t,i.listener?i.listener:i),r=e._events),o=r[t]),void 0===o)o=r[t]=i,++e._eventsCount;else if("function"==typeof o?o=r[t]=n?[i,o]:[o,i]:n?o.unshift(i):o.push(i),(s=c(e))>0&&o.length>s&&!o.warned){o.warned=!0;var u=new Error("Possible EventEmitter memory leak detected. "+o.length+" "+String(t)+" listeners added. Use emitter.setMaxListeners() to increase limit");u.name="MaxListenersExceededWarning",u.emitter=e,u.type=t,u.count=o.length,l=u,console&&console.warn&&console.warn(l)}return e}function u(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function h(e,t,i){var n={fired:!1,wrapFn:void 0,target:e,type:t,listener:i},s=u.bind(n);return s.listener=i,n.wrapFn=s,s}function p(e,t,i){var n=e._events;if(void 0===n)return[];var s=n[t];return void 0===s?[]:"function"==typeof s?i?[s.listener||s]:[s]:i?function(e){for(var t=new Array(e.length),i=0;i<t.length;++i)t[i]=e[i].listener||e[i];return t}(s):f(s,s.length)}function d(e){var t=this._events;if(void 0!==t){var i=t[e];if("function"==typeof i)return 1;if(void 0!==i)return i.length}return 0}function f(e,t){for(var i=new Array(t),n=0;n<t;++n)i[n]=e[n];return i}function y(e,t,i,n){if("function"==typeof e.on)n.once?e.once(t,i):e.on(t,i);else{if("function"!=typeof e.addEventListener)throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof e);e.addEventListener(t,(function s(r){n.once&&e.removeEventListener(t,s),i(r)}))}}Object.defineProperty(r,"defaultMaxListeners",{enumerable:!0,get:function(){return o},set:function(e){if("number"!=typeof e||e<0||s(e))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+e+".");o=e}}),r.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},r.prototype.setMaxListeners=function(e){if("number"!=typeof e||e<0||s(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this},r.prototype.getMaxListeners=function(){return c(this)},r.prototype.emit=function(e){for(var t=[],i=1;i<arguments.length;i++)t.push(arguments[i]);var s="error"===e,r=this._events;if(void 0!==r)s=s&&void 0===r.error;else if(!s)return!1;if(s){var o;if(t.length>0&&(o=t[0]),o instanceof Error)throw o;var a=new Error("Unhandled error."+(o?" ("+o.message+")":""));throw a.context=o,a}var c=r[e];if(void 0===c)return!1;if("function"==typeof c)n(c,this,t);else{var l=c.length,u=f(c,l);for(i=0;i<l;++i)n(u[i],this,t)}return!0},r.prototype.addListener=function(e,t){return l(this,e,t,!1)},r.prototype.on=r.prototype.addListener,r.prototype.prependListener=function(e,t){return l(this,e,t,!0)},r.prototype.once=function(e,t){return a(t),this.on(e,h(this,e,t)),this},r.prototype.prependOnceListener=function(e,t){return a(t),this.prependListener(e,h(this,e,t)),this},r.prototype.removeListener=function(e,t){var i,n,s,r,o;if(a(t),void 0===(n=this._events))return this;if(void 0===(i=n[e]))return this;if(i===t||i.listener===t)0==--this._eventsCount?this._events=Object.create(null):(delete n[e],n.removeListener&&this.emit("removeListener",e,i.listener||t));else if("function"!=typeof i){for(s=-1,r=i.length-1;r>=0;r--)if(i[r]===t||i[r].listener===t){o=i[r].listener,s=r;break}if(s<0)return this;0===s?i.shift():function(e,t){for(;t+1<e.length;t++)e[t]=e[t+1];e.pop()}(i,s),1===i.length&&(n[e]=i[0]),void 0!==n.removeListener&&this.emit("removeListener",e,o||t)}return this},r.prototype.off=r.prototype.removeListener,r.prototype.removeAllListeners=function(e){var t,i,n;if(void 0===(i=this._events))return this;if(void 0===i.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==i[e]&&(0==--this._eventsCount?this._events=Object.create(null):delete i[e]),this;if(0===arguments.length){var s,r=Object.keys(i);for(n=0;n<r.length;++n)"removeListener"!==(s=r[n])&&this.removeAllListeners(s);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(t=i[e]))this.removeListener(e,t);else if(void 0!==t)for(n=t.length-1;n>=0;n--)this.removeListener(e,t[n]);return this},r.prototype.listeners=function(e){return p(this,e,!0)},r.prototype.rawListeners=function(e){return p(this,e,!1)},r.listenerCount=function(e,t){return"function"==typeof e.listenerCount?e.listenerCount(t):d.call(e,t)},r.prototype.listenerCount=d,r.prototype.eventNames=function(){return this._eventsCount>0?t(this._events):[]}}},t={};function i(n){var s=t[n];if(void 0!==s)return s.exports;var r=t[n]={exports:{}};return e[n](r,r.exports,i),r.exports}i.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),(()=>{var e=i(187);const t=e=>new Promise((t=>setTimeout(t,e))),n=(e,t,i,n,s,r,o)=>e>=n-o&&e<=n+o&&t>=s-o&&t<=s+o&&i>=r-o&&i<=r+o,s=e=>{const t=e.toString().replace("-","");return t.length>3?`${t.substring(0,3)}-${t.substring(3)}`:e.toString()},r=["k","M","G","T","P","E"],o={0:[255,255,255],1:[224,50,50],2:[93,189,113],3:[93,182,229],4:[255,255,255],5:[238,198,78],6:[194,80,80],7:[156,110,175],8:[254,122,195],9:[245,157,121],10:[177,143,131],11:[141,206,167],12:[112,168,174],13:[211,209,231],14:[143,126,152],15:[106,196,191],16:[213,195,152],17:[234,142,80],18:[151,202,233],19:[178,98,135],20:[143,141,121],21:[166,117,94],22:[175,168,168],23:[231,141,154],24:[187,214,91],25:[12,123,86],26:[122,195,254],27:[171,60,230],28:[205,168,12],29:[69,97,171],30:[41,165,184],31:[184,155,123],32:[200,224,254],33:[240,240,150],34:[237,140,161],35:[249,138,138],36:[251,238,165],37:[255,255,255],38:[40,96,160],39:[145,131,112],40:[76,76,76],41:[242,157,157],42:[108,183,214],43:[175,237,174],44:[255,167,95],45:[241,241,241],46:[236,240,41],47:[255,154,24],48:[246,68,165],49:[224,58,58],50:[138,109,227],51:[255,127,70],52:[49,96,65],53:[179,221,243],54:[58,100,121],55:[160,160,160],56:[132,114,50],57:[101,185,231],58:[75,65,117],59:[225,59,59],60:[240,203,88],61:[205,63,152],62:[207,207,207],63:[39,106,159],64:[216,123,27],65:[142,131,147],66:[240,203,87],67:[101,185,231],68:[101,185,231],69:[121,205,121],70:[239,202,87],71:[239,202,87],72:[61,61,61],73:[239,202,87],74:[73,168,231],75:[224,50,50],76:[120,35,35],77:[101,185,231],78:[58,100,121],79:[224,50,50],80:[101,185,231],81:[242,164,12],82:[164,204,170],83:[168,84,242],84:[101,185,231],85:[61,61,61]};var a=function(e,t,i,n){return new(i||(i=Promise))((function(s,r){function o(e){try{c(n.next(e))}catch(e){r(e)}}function a(e){try{c(n.throw(e))}catch(e){r(e)}}function c(e){var t;e.done?s(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(o,a)}c((n=n.apply(e,t||[])).next())}))};const c={2578778090:"Knife",1737195953:"Nightstick",1317494643:"Hammer",2508868239:"Bat",1141786504:"Golf Club",2227010557:"Crowbar",4192643659:"Bottle",3756226112:"Switch Blade",453432689:"Pistol",1593441988:"Combat Pistol",584646201:"AP Pistol",2578377531:"Pistol 50",1198879012:"Flare Gun",3696079510:"Marksman Pistol",3249783761:"Revolver",324215364:"Micro SMG",736523883:"SMG",4024951519:"Assault SMG",171789620:"Combat PDW",3220176749:"Assault Rifle",2210333304:"Carbine Rifle",2937143193:"Advanced Rifle",1649403952:"Compact Rifle",2634544996:"Machine Gun",2144741730:"Combat MG",487013001:"Pump Shotgun",2017895192:"Sawn Off Shotgun",3800352039:"Assault Shotgun",2640438543:"Bullpup Shotgun",4019527611:"Double Barrel Shotgun",911657153:"Stun Gun",100416529:"Sniper Rifle",205991906:"Heavy Sniper",2726580491:"Grenade Launcher",1305664598:"Grenade Launcher Smoke",2982836145:"RPG",1119849093:"Minigun",2481070269:"Grenade",741814745:"Sticky Bomb",4256991824:"Smoke Grenade",2694266206:"BZ Gas",615608432:"Molotov",101631238:"Fire Extinguisher",883325847:"Petrol Can",3218215474:"SNS Pistol",3231910285:"Special Carbine",3523564046:"Heavy Pistol",2132975508:"Bullpup Rifle",1672152130:"Homing Launcher",2874559379:"Proximity Mine",126349499:"Snowball",137902532:"Vintage Pistol",2460120199:"Dagger",2138347493:"Firework",2828843422:"Musket",3342088282:"Marksman Rifle",984333226:"Heavy Shotgun",1627465347:"Gusenberg",4191993645:"Hatchet",1834241177:"Railgun",2725352035:"Unarmed",3638508604:"Knuckle Duster",3713923289:"Machete",3675956304:"Machine Pistol",2343591895:"Flashlight",600439132:"Ball",1233104067:"Flare",2803906140:"Night Vision",4222310262:"Parachute",317205821:"Sweeper Shotgun",3441901897:"Battle Axe",125959754:"Compact Grenade Launcher",3173288789:"Mini SMG",3125143736:"Pipe Bomb",2484171525:"Pool Cue",419712736:"Wrench",3219281620:"Pistol Mk2",961495388:"Assault Rifle Mk2",4208062921:"Carbine Rifle Mk2",3686625920:"Combat MG Mk2",177293209:"Heavy Sniper Mk2",2024373456:"SMG Mk2"},l={2578778090:"Knife",1737195953:"Nightstick",1317494643:"Hammer",2508868239:"Bat",1141786504:"GolfClub",2227010557:"Crowbar",4192643659:"Bottle",3756226112:"SwitchBlade",453432689:"Pistol",1593441988:"CombatPistol",584646201:"APPistol",2578377531:"Pistol50",1198879012:"FlareGun",3696079510:"MarksmanPistol",3249783761:"Revolver",324215364:"MicroSMG",736523883:"SMG",4024951519:"AssaultSMG",171789620:"CombatPDW",3220176749:"AssaultRifle",2210333304:"CarbineRifle",2937143193:"AdvancedRifle",1649403952:"CompactRifle",2634544996:"MG",2144741730:"CombatMG",487013001:"PumpShotgun",2017895192:"SawnOffShotgun",3800352039:"AssaultShotgun",2640438543:"BullpupShotgun",4019527611:"DoubleBarrelShotgun",911657153:"StunGun",100416529:"SniperRifle",205991906:"HeavySniper",2726580491:"GrenadeLauncher",1305664598:"GrenadeLauncherSmoke",2982836145:"RPG",1119849093:"Minigun",2481070269:"Grenade",741814745:"StickyBomb",4256991824:"SmokeGrenade",2694266206:"BZGas",615608432:"Molotov",101631238:"FireExtinguisher",883325847:"PetrolCan",3218215474:"SNSPistol",3231910285:"SpecialCarbine",3523564046:"HeavyPistol",2132975508:"BullpupRifle",1672152130:"HomingLauncher",2874559379:"ProximityMine",126349499:"Snowball",137902532:"VintagePistol",2460120199:"Dagger",2138347493:"Firework",2828843422:"Musket",3342088282:"MarksmanRifle",984333226:"HeavyShotgun",1627465347:"Gusenberg",4191993645:"Hatchet",1834241177:"Railgun",2725352035:"Unarmed",3638508604:"KnuckleDuster",3713923289:"Machete",3675956304:"MachinePistol",2343591895:"Flashlight",600439132:"Ball",1233104067:"Flare",2803906140:"NightVision",4222310262:"Parachute",317205821:"SweeperShotgun",3441901897:"BattleAxe",125959754:"CompactGrenadeLauncher",3173288789:"MiniSMG",3125143736:"PipeBomb",2484171525:"PoolCue",419712736:"Wrench",3219281620:"PistolMk2",961495388:"AssaultRifleMk2",4208062921:"CarbineRifleMk2",3686625920:"CombatMGMk2",177293209:"HeavySniperMk2",2024373456:"SMGMk2"},u={housekeys:{description:e=>`A clean key made of brass. Unlocks the door to House #${e}.`,value:e=>"#"+e,insertionCondition:e=>e>=0},businesskeys:{description:e=>`A clean key made of brass. Unlocks the door to Business #${e}.`,value:e=>"#"+e,insertionCondition:e=>e>=0},weapons:{type:"Weapon",description:e=>h[Number(e[0])].description||"Description to be added",value:e=>e[1].ammo.toString(),topLeft:e=>c[e[0]],image:e=>l[e[0]]},phone:{type:"Electronics",description:e=>`A slick phone with numerous functionalities. SIM number: ${s(e)}.`,value:e=>s(e),insertionCondition:e=>Number(e)>0},cash:{type:"Currency",description:e=>{return`Your hard-earned money. You have $${t=e,t.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")} in your pockets.`;var t},value:e=>((e,t)=>{let i=e<0;if(e=Math.abs(e),Number.isNaN(e))return null;if(e<1e3)return e;const n=Math.floor(Math.log(e)/Math.log(1e3));return(i?"-":"")+(e/Math.pow(1e3,n)).toFixed(void 0)+r[n-1]})(e),insertionCondition:e=>Number(e)>0}},h={2578778090:{},1737195953:{},1317494643:{},2508868239:{},1141786504:{},2227010557:{},4192643659:{},3756226112:{},453432689:{},1593441988:{},584646201:{},2578377531:{},1198879012:{},3696079510:{},3249783761:{},324215364:{},736523883:{},4024951519:{},171789620:{},3220176749:{},2210333304:{},2937143193:{},1649403952:{},2634544996:{description:"An auto-firing, rifled long-barrel autoloading firearm designed for sustained direct fire.",maximumAmmoInClip:54,type:"Machine Gun"},2144741730:{},487013001:{},2017895192:{},3800352039:{},2640438543:{},4019527611:{},911657153:{},100416529:{},205991906:{},2726580491:{},1305664598:{},2982836145:{},1119849093:{},2481070269:{},741814745:{},4256991824:{},2694266206:{},615608432:{},101631238:{},883325847:{},3218215474:{},3231910285:{},3523564046:{},2132975508:{},1672152130:{},2874559379:{},126349499:{},137902532:{},2460120199:{},2138347493:{},2828843422:{},3342088282:{},984333226:{},1627465347:{},4191993645:{},1834241177:{},2725352035:{},3638508604:{},3713923289:{},3675956304:{},2343591895:{},600439132:{},1233104067:{},2803906140:{},4222310262:{},317205821:{},3441901897:{},125959754:{},3173288789:{},3125143736:{},2484171525:{},419712736:{},3219281620:{},961495388:{},4208062921:{},3686625920:{},177293209:{},2024373456:{}},p={house:{outline:"#293577",width:65,image:"key",useCategoryNameAsType:!0,value:e=>"#"+e.toString()},business:{outline:"#31644f",width:65,image:"key",useCategoryNameAsType:!0,value:e=>"#"+e.toString()},vehicle:{outline:"#a358b8",width:100,value:e=>"#"+e.toString(),topLeft:" "},weapon:{outline:"#6e2937",width:100,value:e=>e.ammo.toString()},misc:{outline:"#878b9f",width:65}};class d{constructor(e,t,i="misc"){this.func=e,this.playerInfoKey=t,this.category=i}get(){const e=this.func(this.playerInfoKey);if(-1===e||Array.isArray(e)&&!e.length||"object"==typeof e&&!Object.keys(e).length)return null;const t=Object.assign(Object.assign({},p[this.category]),u[this.playerInfoKey]);return u[this.playerInfoKey].insertionCondition&&!u[this.playerInfoKey].insertionCondition(e)?null:(Array.isArray(e)?e:"object"==typeof e?Object.keys(e).map((t=>[t,e[t]])):[e]).map((e=>Object.assign(Object.assign({},t),{image:p[this.category].image||(u[this.playerInfoKey].image?u[this.playerInfoKey].image(e):void 0)||this.playerInfoKey,bottomRight:u[this.playerInfoKey].value?u[this.playerInfoKey].value(e):p[this.category].value?p[this.category].value(e):JSON.stringify(e),type:t.type||(p[this.category].useCategoryNameAsType?this.category:"item"),description:u[this.playerInfoKey].description?u[this.playerInfoKey].description(e):"Just an inventory item.",topLeft:p[this.category].topLeft||(u[this.playerInfoKey].topLeft?u[this.playerInfoKey].topLeft(e):void 0)||"1"})))}static bundle(...e){const t=[];return e.filter((e=>e)).forEach((e=>{Array.isArray(e)?t.push(...e):t.push(e)})),t}}new class extends class extends class extends class extends class extends class extends class{constructor(){this.tickInstance=null,this.tickFunctions=[],this.routingBucket=0,this.assignBaseListeners()}addToTick(...e){e.forEach((e=>{-1!==this.tickFunctions.findIndex((t=>t.id===e.id))&&console.error(`[ClientBase]: A tick function with the id ${e.id} already exists in the stack! The newly added tick function will not be executed.`)})),this.tickFunctions.push(...e),this.removeTickDuplicates(),this.refreshTicks()}addToTickUnique(...e){e.forEach((e=>{this.removeFromTick(e.id)})),this.addToTick(...e)}removeFromTick(e){this.tickFunctions=this.tickFunctions.filter((t=>t.id!=e))}refreshTicks(){this.tickInstance&&(clearTick(this.tickInstance),this.tickInstance=null),this.tickFunctions.length>0&&(this.tickInstance=setTick((()=>{return e=this,t=void 0,n=function*(){if(!this.tickFunctions.length)return clearTick(this.tickInstance),void(this.tickInstance=null);this.tickFunctions.forEach((e=>{e.function()}))},new((i=void 0)||(i=Promise))((function(s,r){function o(e){try{c(n.next(e))}catch(e){r(e)}}function a(e){try{c(n.throw(e))}catch(e){r(e)}}function c(e){var t;e.done?s(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(o,a)}c((n=n.apply(e,t||[])).next())}));var e,t,i,n})))}removeTickDuplicates(){this.tickFunctions=this.tickFunctions.filter((e=>this.tickFunctions.findIndex((t=>t.id==e.id))==this.tickFunctions.indexOf(e)))}assignBaseListeners(){onNet(`${GetCurrentResourceName()}:set-routing-bucket`,(e=>{this.routingBucket=e}))}setEntityRoutingBucket(e){TriggerServerEvent(`${GetCurrentResourceName()}:set-client-routing-bucket`,e),this.routingBucket=e}}{constructor(){super(),this._blips=[],this._markers=[],this._vehicles=[],this._peds=[],this._waypoints=[],this._checkpoints=new Map,this.assignDefaultEntityListeners()}get blips(){return this._blips}get markers(){return this._markers}get vehicles(){return this._vehicles}get peds(){return this._peds}get waypoints(){return this._waypoints}get checkpoints(){return this._checkpoints}createBlips(e){const t=e.map((e=>Object.assign(Object.assign({},e),{instance:null})));this._blips.push(...t),this.refreshBlips()}createBlip(e){const t=AddBlipForCoord(e.pos[0],e.pos[1],e.pos[2]);return SetBlipSprite(t,e.id),SetBlipDisplay(t,4),SetBlipScale(t,1),SetBlipColour(t,e.color),SetBlipAsShortRange(t,!e.longRange),BeginTextCommandSetBlipName("STRING"),AddTextComponentString(e.title),EndTextCommandSetBlipName(t),t}clearBlips(){this._blips.forEach((e=>{RemoveBlip(e.instance)})),this._blips=[]}refreshBlips(){this.blips.forEach((e=>{e.instance||(e.instance=this.createBlip(e))}))}createWaypoint(e,t,i,n,s){const r=GetCurrentResourceName().replace("-"," "),a=`${r.slice(0,1).toUpperCase()}${r.slice(1)}`,c=this.createBlip({id:n||1,color:i||69,title:t||a,pos:e,longRange:!0});return this.createCheckpoint(2,e[0],e[1],e[2],null,null,null,3,o[i][0],o[i][1],o[i][2],255,0),SetBlipRoute(c,!0),s&&SetBlipRouteColour(c,s),this._waypoints.push(c),c}clearWaypoints(){this._waypoints.forEach((e=>{this.clearWaypoint(e,!0)})),this._waypoints=[]}clearWaypoint(e,t=!1){this.clearCheckpointByPosition(GetBlipCoords(e)),SetBlipRoute(e,!1),RemoveBlip(e),t||this._waypoints.splice(this._waypoints.indexOf(e),1)}createCheckpoint(e,t,i,n,s,r,o,a,c,l,u,h,p){const d=CreateCheckpoint(e,t,i,n,s,r,o,a,c,l,u,h,p);return this._checkpoints.set(d,[t,i,n,s,r,o]),d}clearCheckpoint(e){DeleteCheckpoint(e),this._checkpoints.has(e)&&this._checkpoints.delete(e)}clearCheckpointByPosition(e){const t=Array.from(this._checkpoints.keys()).find((t=>Math.floor(this._checkpoints.get(t)[0])===Math.floor(e[0])&&Math.floor(this._checkpoints.get(t)[1])===Math.floor(e[1])&&Math.floor(this._checkpoints.get(t)[2])===Math.floor(e[2])));t&&this.clearCheckpoint(t)}createMarkers(e){const t=e.map((e=>Object.assign(Object.assign({},e),{instance:null})));this._markers.push(...t),this.refreshMarkers()}clearMarkers(){this._markers=[],this.removeFromTick(`${GetCurrentResourceName()}_markers`)}refreshMarkers(){this.addToTickUnique({id:`${GetCurrentResourceName()}_markers`,function:()=>a(this,void 0,void 0,(function*(){const e=GetEntityCoords(GetPlayerPed(-1),!0);this._markers.forEach((i=>a(this,void 0,void 0,(function*(){var s,r,o;if(n(e[0],e[1],e[2],i.pos[0],i.pos[1],i.pos[2],i.renderDistance)){if(i.textureDict&&!HasStreamedTextureDictLoaded(i.textureDict))for(RequestStreamedTextureDict(i.textureDict,!0);!HasStreamedTextureDictLoaded(i.textureDict);)yield t(100);DrawMarker(i.marker,i.pos[0],i.pos[1],i.pos[2],0,0,0,(null===(s=i.rotation)||void 0===s?void 0:s[0])||0,(null===(r=i.rotation)||void 0===r?void 0:r[1])||0,(null===(o=i.rotation)||void 0===o?void 0:o[2])||0,i.scale,i.scale,i.scale,i.rgba[0],i.rgba[1],i.rgba[2],i.rgba[3],!1,!0,2,!1,i.textureDict||null,i.textureName||null,!1),i.underlyingCircle&&DrawMarker(i.underlyingCircle.marker,i.pos[0],i.pos[1],i.pos[2]-.9,0,0,0,0,0,0,i.underlyingCircle.scale,i.underlyingCircle.scale,i.underlyingCircle.scale,i.underlyingCircle.rgba[0]||i.rgba[0],i.underlyingCircle.rgba[1]||i.rgba[1],i.underlyingCircle.rgba[2]||i.rgba[2],i.underlyingCircle.rgba[3]||i.rgba[3],!1,!0,2,!1,null,null,!1)}}))))}))})}createVehicleAsync(e,i,n,s,r,o,c,l=!1){return a(this,void 0,void 0,(function*(){let a=0;for(RequestModel(e);!HasModelLoaded(e);){if(a>10)return 0;yield t(100),a++}const u=CreateVehicle(e,i,n,s,r,o,c);return u&&(c&&this._vehicles.push(u),l&&TaskWarpPedIntoVehicle(GetPlayerPed(-1),u,-1)),u}))}removeVehicle(e){DoesEntityExist(e)&&DeleteEntity(e),this._vehicles.indexOf(e)>-1&&this._vehicles.splice(this._vehicles.indexOf(e),1)}removePed(e){DoesEntityExist(e)&&DeleteEntity(e),this._peds.indexOf(e)>-1&&this._peds.splice(this._peds.indexOf(e),1)}createPedInsideVehicleAsync(e,i,n,s,r,o){return a(this,void 0,void 0,(function*(){let a=0;for(RequestModel(n);!HasModelLoaded(n);){if(a>10)return 0;yield t(100),a++}const c=CreatePedInsideVehicle(e,i,n,s,r,o);return c&&this._peds.push(c),c}))}createPedAsync(e,i,n,s,r,o,c,l){return a(this,void 0,void 0,(function*(){let a=0;for(RequestModel(i);!HasModelLoaded(i);){if(a>10)return 0;yield t(100),a++}const u=CreatePed(e,i,n,s,r,o,c,l);return u&&this._peds.push(u),u}))}assignDefaultEntityListeners(){onNet("onResourceStop",(e=>{e===GetCurrentResourceName()&&(this._vehicles.forEach((e=>{this.removeVehicle(e)})),this._peds.forEach((e=>{this.removePed(e)})),this._vehicles=[],this._peds=[])}))}}{constructor(){super(...arguments),this._actionPoints=[]}get actionPoints(){return this._actionPoints}createActionPoints(...e){this._actionPoints.push(...e),this.refreshActionPoints()}clearActionPoints(){this._actionPoints=[],this.removeFromTick(`${GetCurrentResourceName()}_actionpoints`)}removeActionPoint(e){this._actionPoints=this._actionPoints.filter((t=>!(e.pos[0]===t.pos[0]&&e.pos[1]===t.pos[1]&&e.pos[2]===t.pos[2]))),this._actionPoints.length||this.clearActionPoints()}refreshActionPoints(){this.addToTickUnique({id:`${GetCurrentResourceName()}_actionpoints`,function:()=>{const e=GetEntityCoords(GetPlayerPed(-1),!0);let t=[];this._actionPoints.forEach((i=>{n(e[0],e[1],e[2],i.pos[0],i.pos[1],i.pos[2],1*(IsPedInAnyVehicle(GetPlayerPed(-1),!1)?4:1))&&(i.action(),i.once&&t.push(i))})),t.length>0&&(t.forEach((e=>{this._actionPoints.splice(this._actionPoints.indexOf(e),1)})),t=[])}})}}{constructor(){super(...arguments),this.timeBetweenFeeds=8e3}addToFeed(...e){e.forEach(((e,t)=>{setTimeout((()=>{BeginTextCommandThefeedPost("STRING"),AddTextComponentSubstringPlayerName(e),EndTextCommandThefeedPostTicker(!1,!0)}),t*this.timeBetweenFeeds)}))}}{getPlayerInfo(e){let t=GetConvar(`${i.g.GetPlayerServerId(i.g.PlayerId())}_PI_${e}`,"-1");var n;return n=t.toString(),!/^\s*$/.test(n)&&(n=(n=(n=n.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@")).replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]")).replace(/(?:^|:|,)(?:\s*\[)+/g,""),/^[\],:{}\s]*$/.test(n))&&(t=JSON.parse(t.toString(),(function(e,t){return"object"==typeof t||isNaN(t)?t:Number(t)}))),t}}{constructor(){super(),this.uiDisplay=!1,this.uiDisplayCooldownTimestamp=0,this.onIncomingUIMessageEvent=new e,this.addDefaultListeners()}isUIShowing(){return this.uiDisplay}isUIOnCooldown(){return Date.now()<this.uiDisplayCooldownTimestamp}showUI(){this.isUIShowing()||(EnterCursorMode(),SetNuiFocus(!0,!0),SetNuiFocusKeepInput(!1)),this.uiDisplay=!0,this.addToTickUnique({id:`${GetCurrentResourceName()}_UI`,function:()=>{DisableControlAction(0,1,this.uiDisplay),DisableControlAction(0,2,this.uiDisplay),DisableControlAction(0,142,this.uiDisplay),DisableControlAction(0,18,this.uiDisplay),DisableControlAction(0,322,this.uiDisplay),DisableControlAction(0,106,this.uiDisplay),this.uiDisplay||(this.removeFromTick(`${GetCurrentResourceName()}_UI`),SetNuiFocus(!1,!1))}})}hideUI(){this.uiDisplayCooldownTimestamp=Date.now()+3e3,LeaveCursorMode(),this.uiDisplay=!1,SendNuiMessage(JSON.stringify({type:"dismiss"}))}addUIListener(e){RegisterNuiCallbackType(e),on(`__cfx_nui:${e}`,((t,i)=>{this.onIncomingUIMessageEvent.emit(e,t),i("ok")})),this.onIncomingUIMessageEvent.on(e,(t=>{this.onIncomingUIMessage.call(this,e,t)}))}onIncomingUIMessage(e,t){}onForceShowUI(e){this.showUI()}onForceHideUI(){this.hideUI()}addDefaultListeners(){RegisterNuiCallbackType("dismiss"),on("__cfx_nui:dismiss",((e,t)=>{this.onForceHideUI(),t("ok")})),onNet(`${GetCurrentResourceName()}:force-showui`,(e=>{this.onForceShowUI(e)}))}}{constructor(){super(),this.registerKeyBindings(),this.addUIListener("inventory-item-dropped"),this.addDebugPeds()}onForceHideUI(){super.onForceHideUI(),this.removeFromTick(`${GetCurrentResourceName()}_inventorygive`)}onForceShowUI(e){super.onForceShowUI(e)}showInventoryUI(){const e={house_keys:d.bundle(new d(this.getPlayerInfo.bind(this),"housekeys","house").get()),business_keys:d.bundle(new d(this.getPlayerInfo.bind(this),"businesskeys","business").get()),vehicles:[],weapons:d.bundle(new d(this.getPlayerInfo.bind(this),"weapons","weapon").get()),misc:d.bundle(new d(this.getPlayerInfo.bind(this),"cash").get(),new d(this.getPlayerInfo.bind(this),"phone").get())};SendNuiMessage(JSON.stringify({type:"update",resource:GetCurrentResourceName(),items:JSON.stringify(e)})),this.addToTickUnique({id:`${GetCurrentResourceName()}_inventorygive`,function:()=>{this.showClosestPedsICanOfferTo()}})}onIncomingUIMessage(e,t){"inventory-item-dropped"===e&&console.log(t)}registerKeyBindings(){RegisterCommand("+inventory",(()=>{this.showUI(),this.showInventoryUI()}),!1),RegisterKeyMapping("+inventory","Open inventory","keyboard","i")}addDebugPeds(){this.createPedAsync(0,GetHashKey("a_f_m_downtown_01"),123.2835,-2667.7188,5.9934,0,!0,!0),this.createPedAsync(0,GetHashKey("a_f_y_femaleagent"),120.2769,-2671.6353,5.9934,0,!0,!0),this.createPedAsync(0,GetHashKey("a_f_m_prolhost_01"),124.1934,-2663.5913,5.9934,0,!0,!0)}draw(e,i,n){return s=this,r=void 0,a=function*(){let[s,r,o]=GetScreenCoordFromWorldCoord(e,i,n);if(s)if(HasStreamedTextureDictLoaded("inventorysprites")){const e=GetNuiCursorPosition(),t=this.getRealScreenCoordsFromOffsets(r,o);Math.abs(e[0]-t[0])<36&&Math.abs(e[1]-t[1])<36?DrawSprite("inventorysprites","inventory-give-selected",r,o,.08,.14,0,255,255,255,255):DrawSprite("inventorysprites","inventory-give",r,o,.08,.14,0,255,255,255,255)}else for(RequestStreamedTextureDict("inventorysprites",!0);!HasStreamedTextureDictLoaded("inventorysprites");)yield t(100)},new((o=void 0)||(o=Promise))((function(e,t){function i(e){try{c(a.next(e))}catch(e){t(e)}}function n(e){try{c(a.throw(e))}catch(e){t(e)}}function c(t){var s;t.done?e(t.value):(s=t.value,s instanceof o?s:new o((function(e){e(s)}))).then(i,n)}c((a=a.apply(s,r||[])).next())}));var s,r,o,a}showClosestPedsICanOfferTo(){let[e,t]=FindFirstPed(0),i=!0;for(;i;){let[t,n]=FindNextObject(e);if(i=t,n!==GetPlayerPed(-1)){let e=GetEntityCoords(n,!0);this.draw(e[0],e[1],e[2])}}EndFindObject(e)}getRealScreenCoordsFromOffsets(e,t){const i=GetActiveScreenResolution();return[i[0]*e,i[1]*t]}}})()})();