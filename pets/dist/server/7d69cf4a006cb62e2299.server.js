(()=>{"use strict";const e={onAccountAuthenticate:"authentication:account-success",onPlayerConnect:"playerJoining",onPlayerDeath:"armoury:onPlayerDeath",onPlayerAuthenticate:"authentication:player-authenticated",onPlayerDisconnect:"playerDropped",onResourceStop:"onResourceStop",onContextMenuItemPressed:"armoury-overlay:context-menu-item-pressed",onPlayerEnterVehicle:"armoury:onPlayerEnterVehicle",onPlayerExitVehicle:"armoury:onPlayerExitVehicle",onPlayerClientsidedCacheLoaded:"armoury:player-resource-cache-loaded"};var t;!function(e){e[e.SERVER_TO_SERVER=0]="SERVER_TO_SERVER",e[e.SERVER_TO_CLIENT=1]="SERVER_TO_CLIENT",e[e.CLIENT_TO_SERVER=2]="CLIENT_TO_SERVER",e[e.CLIENT_TO_CLIENT=3]="CLIENT_TO_CLIENT"}(t||(t={}));const r=new Map,n=new Map,o=new Map;function i(e){return function(i){return class extends i{constructor(...s){super(...s),this.translationFile=null==e?void 0:e.translationFile,r.has(i)&&r.get(i).forEach((([e,r,n])=>{n===t.CLIENT_TO_CLIENT?on(r,super[e].bind(this)):onNet(r,super[e].bind(this))})),n.has(i)&&n.get(i).forEach((e=>{exports(e,super[e].bind(this))})),o.has(i)&&o.get(i).forEach((([e,t])=>{IsDuplicityVersion()?RegisterCommand(e.toLowerCase(),((r,n,o)=>{Number(global.exports.authentication.getPlayerInfo(r,"adminLevel"))<t||super[e].call(this,r,n,o)}),!1):RegisterCommand(e.toLowerCase(),((t,r,n)=>{super[e].call(this,r,n)}),!1)}))}}}}function s(n){return function(o,i,s){const a=e[i]||(null==n?void 0:n.eventName),l=(null==n?void 0:n.direction)||t.CLIENT_TO_SERVER;(null==a?void 0:a.length)?(r.has(o.constructor)||r.set(o.constructor,[]),r.get(o.constructor).some((([e,t,r])=>e===i))||r.get(o.constructor).push([i,a,l])):console.error(`${i} is not recognized as a default event, thus this listener won't work. Please use the eventName property inside the data parameter.`)}}function a(){return function(e,t,r){n.has(e.constructor)||n.set(e.constructor,[]),n.get(e.constructor).some((e=>e===t))||n.get(e.constructor).push(t)}}var l=function(e,t,r,n){var o,i=arguments.length,s=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,r,n);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(i<3?o(s):i>3?o(t,r,s):o(t,r))||s);return i>3&&s&&Object.defineProperty(t,r,s),s};let c=class extends class{constructor(){this.routingBucketCondition=(e,t)=>!0,this.assignServerBaseListeners()}RegisterAdminCommand(e,t,r,n){RegisterCommand(e,((e,n,o)=>{Number(global.exports.authentication.getPlayerInfo(e,"adminLevel"))<t||r(e,n,o)}),n)}assignServerBaseListeners(){onNet(`${GetCurrentResourceName()}:set-client-routing-bucket`,((e,t)=>{this.routingBucketCondition(e,t)&&SetEntityRoutingBucket(e,t)}))}setRoutingBucket(e,t){SetEntityRoutingBucket(GetPlayerPed(e),t),TriggerClientEvent(`${GetCurrentResourceName()}:set-routing-bucket`,e,t)}}{constructor(){super(...arguments),this._virtualWorldsWithPlayers=new Map}get virtualWorldsWithPlayers(){return this._virtualWorldsWithPlayers}onPlayerEnteredScope(e){TriggerClientEvent(`${GetCurrentResourceName()}:refresh-virtual-world`,e.for)}setPlayerVirtualWorld(e,t){const r=this.getPlayerVirtualWorld(e);isNaN(r)||this._virtualWorldsWithPlayers.set(r,(this._virtualWorldsWithPlayers.has(r)?this._virtualWorldsWithPlayers.get(r):[]).filter((t=>t!==e)));const n=[...this._virtualWorldsWithPlayers.has(t)?this._virtualWorldsWithPlayers.get(t):[],e];this._virtualWorldsWithPlayers.set(t,n),global.exports.authentication.setPlayerInfo(e,"virtualWorld",t)}getPlayerVirtualWorld(e){return Math.max(0,Number(global.exports.authentication.getPlayerInfo(e,"virtualWorld")))}removeClientsideVehicles(){TriggerClientEvent(`${GetCurrentResourceName()}:ARM_remove-vehicles`,-1)}};l([s({eventName:"playerEnteredScope"})],c.prototype,"onPlayerEnteredScope",null),c=l([i()],c);var u=function(e,t,r,n){var o,i=arguments.length,s=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,r,n);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(i<3?o(s):i>3?o(t,r,s):o(t,r))||s);return i>3&&s&&Object.defineProperty(t,r,s),s};let p=class extends c{constructor(){super(...arguments),this._translationLanguage="ro",this._clientsidedResourceMap=new Map}get translationLanguage(){return this._translationLanguage}get clientsidedResourceMap(){return this._clientsidedResourceMap}getPlayerClientsidedCacheKey(e,t){if(this._clientsidedResourceMap.has(e)){const r=this._clientsidedResourceMap.get(e);if(r[t])return r[t]}return null}updatePlayerClientsidedCacheKey(e,t,r){const n=this._clientsidedResourceMap.has(e)&&this._clientsidedResourceMap.get(e)||{};n[t]=r,this._clientsidedResourceMap.set(e,n),TriggerClientEvent("armoury-overlay:update-resource-metadata",e,GetCurrentResourceName(),t,r)}onPlayerClientsidedCacheLoaded(e){e[GetCurrentResourceName()]&&this._clientsidedResourceMap.set(source,e[GetCurrentResourceName()])}onPlayerDisconnect(){this._clientsidedResourceMap.has(source)&&this._clientsidedResourceMap.delete(source)}translate(e,t){let r=this.translationFile[this._translationLanguage][e];return t&&Object.keys(t).forEach((e=>{r=r.replace(`{${e}}`,t[e])})),r}setTranslationLanguage(e){this._translationLanguage=e}};u([s()],p.prototype,"onPlayerClientsidedCacheLoaded",null),u([s()],p.prototype,"onPlayerDisconnect",null),p=u([i()],p);const d={a_c_chop:{speed:1,title:"pet_name_rottweiler",friendliness:"0%",affection:"50%",protection:"100%",price:.01},a_c_husky:{speed:1,title:"pet_name_husky",friendliness:"40%",affection:"90%",protection:"50%",price:.005},a_c_retriever:{speed:1,title:"pet_name_labrador_retriever",friendliness:"100%",affection:"100%",protection:"10%",price:.005},a_c_poodle:{speed:1,title:"pet_name_poodle",friendliness:"70%",affection:"70%",protection:"0%",price:.0025},a_c_westy:{speed:1,title:"pet_name_westy",friendliness:"75%",affection:"75%",protection:"10%",price:.003},a_c_shepherd:{speed:1,title:"pet_name_shepherd",friendliness:"50%",affection:"80%",protection:"80%",price:.0075},a_c_pug:{speed:1,title:"pet_name_pug",friendliness:"10%",affection:"50%",protection:"0%",price:.005},a_c_cat_01:{speed:1,title:"pet_name_cat",friendliness:"100%",affection:"100%",protection:"0%",price:.001}};var h=function(e,t,r,n){var o,i=arguments.length,s=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,r,n);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(i<3?o(s):i>3?o(t,r,s):o(t,r))||s);return i>3&&s&&Object.defineProperty(t,r,s),s};let y=class extends p{constructor(){super(...arguments),this._pets=new Map}get pets(){return this._pets}createPet(e,t){this._pets.set(t,e)}removePet(e){this._pets.has(e)&&this._pets.delete(e)}spawnPetForPlayerInVirtualWorld(e,t,r,n,o){if(this._pets.has(t)){const i=this._pets.get(t);TriggerClientEvent(`${GetCurrentResourceName()}:create-pet-for-player`,e,i,r,n||!1,o)}}despawnPetForPlayers(e){e.length&&e.forEach((e=>{TriggerClientEvent(`${GetCurrentResourceName()}:destroy-pets-for-player`,e)}))}despawnPetsForPlayer(e){TriggerClientEvent(`${GetCurrentResourceName()}:destroy-pets-for-player`,e)}getPetForVirtualWorld(e){return this._pets.has(e)?this._pets.get(e):null}getPetsForUI(){return Object.keys(d).map((e=>({title:this.translate(d[e].title),key:e,image:e.split("_").slice(2,3)[0].toString(),[this.translate("friendliness")]:d[e].friendliness,[this.translate("affection")]:d[e].affection,[this.translate("protection")]:d[e].protection,[this.translate("price")]:this.computePrice(Number(d[e].price))})))}getPetById(e){return d[e]?Object.assign(Object.assign({},d[e]),{price:this.computePrice(Number(d[e].price)),key:e}):null}getPetNiceNameById(e){return d[e]?this.translate(d[e].title):""}onShouldSyncPetGreetWithOthers(e){e.forEach((e=>{TriggerClientEvent(`${GetCurrentResourceName()}:make-pet-greet-player`,e,!1,NetworkGetNetworkIdFromEntity(GetPlayerPed(source)))}))}onShouldSyncPetFollowWithOthers(e){e.forEach((e=>{TriggerClientEvent(`${GetCurrentResourceName()}:make-pet-follow-player`,e,!1,NetworkGetNetworkIdFromEntity(GetPlayerPed(source)))}))}computePrice(e){return 1e7*e}};h([a()],y.prototype,"createPet",null),h([a()],y.prototype,"removePet",null),h([a()],y.prototype,"spawnPetForPlayerInVirtualWorld",null),h([a()],y.prototype,"despawnPetForPlayers",null),h([a()],y.prototype,"despawnPetsForPlayer",null),h([a()],y.prototype,"getPetForVirtualWorld",null),h([a()],y.prototype,"getPetsForUI",null),h([a()],y.prototype,"getPetById",null),h([a()],y.prototype,"getPetNiceNameById",null),h([s({eventName:`${GetCurrentResourceName()}:sync-greet-with-others`})],y.prototype,"onShouldSyncPetGreetWithOthers",null),h([s({eventName:`${GetCurrentResourceName()}:sync-pet-follow-with-others`})],y.prototype,"onShouldSyncPetFollowWithOthers",null),y=h([i({translationFile:{en:{affection:"affection",friendliness:"friendliness",protection:"protection",pet_name_rottweiler:"Rottweiler",pet_name_husky:"Husky",pet_name_labrador_retriever:"Labrador Retriever",pet_name_poodle:"Poodle",pet_name_westy:"West Highland Terrier",pet_name_shepherd:"English Shepherd",pet_name_pug:"Pug",pet_name_cat:"Tabby Cat",price:"Price"},ro:{affection:"afectiune",friendliness:"prietenie",protection:"protectie",pet_name_rottweiler:"Rottweiler",pet_name_husky:"Husky",pet_name_labrador_retriever:"Labrador Retriever",pet_name_poodle:"Pudel",pet_name_westy:"West Highland Terrier",pet_name_shepherd:"Ciobanesc Englez",pet_name_pug:"Pug",pet_name_cat:"Pisica",price:"Pret"}}})],y),new y})();