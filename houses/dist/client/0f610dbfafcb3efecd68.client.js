(()=>{"use strict";var e={187:e=>{var t,i="object"==typeof Reflect?Reflect:null,n=i&&"function"==typeof i.apply?i.apply:function(e,t,i){return Function.prototype.apply.call(e,t,i)};t=i&&"function"==typeof i.ownKeys?i.ownKeys:Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:function(e){return Object.getOwnPropertyNames(e)};var o=Number.isNaN||function(e){return e!=e};function r(){r.init.call(this)}e.exports=r,e.exports.once=function(e,t){return new Promise((function(i,n){function o(i){e.removeListener(t,r),n(i)}function r(){"function"==typeof e.removeListener&&e.removeListener("error",o),i([].slice.call(arguments))}_(e,t,r,{once:!0}),"error"!==t&&function(e,t,i){"function"==typeof e.on&&_(e,"error",t,{once:!0})}(e,o)}))},r.EventEmitter=r,r.prototype._events=void 0,r.prototype._eventsCount=0,r.prototype._maxListeners=void 0;var s=10;function a(e){if("function"!=typeof e)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof e)}function c(e){return void 0===e._maxListeners?r.defaultMaxListeners:e._maxListeners}function l(e,t,i,n){var o,r,s,l;if(a(i),void 0===(r=e._events)?(r=e._events=Object.create(null),e._eventsCount=0):(void 0!==r.newListener&&(e.emit("newListener",t,i.listener?i.listener:i),r=e._events),s=r[t]),void 0===s)s=r[t]=i,++e._eventsCount;else if("function"==typeof s?s=r[t]=n?[i,s]:[s,i]:n?s.unshift(i):s.push(i),(o=c(e))>0&&s.length>o&&!s.warned){s.warned=!0;var u=new Error("Possible EventEmitter memory leak detected. "+s.length+" "+String(t)+" listeners added. Use emitter.setMaxListeners() to increase limit");u.name="MaxListenersExceededWarning",u.emitter=e,u.type=t,u.count=s.length,l=u,console&&console.warn&&console.warn(l)}return e}function u(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function h(e,t,i){var n={fired:!1,wrapFn:void 0,target:e,type:t,listener:i},o=u.bind(n);return o.listener=i,n.wrapFn=o,o}function d(e,t,i){var n=e._events;if(void 0===n)return[];var o=n[t];return void 0===o?[]:"function"==typeof o?i?[o.listener||o]:[o]:i?function(e){for(var t=new Array(e.length),i=0;i<t.length;++i)t[i]=e[i].listener||e[i];return t}(o):f(o,o.length)}function p(e){var t=this._events;if(void 0!==t){var i=t[e];if("function"==typeof i)return 1;if(void 0!==i)return i.length}return 0}function f(e,t){for(var i=new Array(t),n=0;n<t;++n)i[n]=e[n];return i}function _(e,t,i,n){if("function"==typeof e.on)n.once?e.once(t,i):e.on(t,i);else{if("function"!=typeof e.addEventListener)throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof e);e.addEventListener(t,(function o(r){n.once&&e.removeEventListener(t,o),i(r)}))}}Object.defineProperty(r,"defaultMaxListeners",{enumerable:!0,get:function(){return s},set:function(e){if("number"!=typeof e||e<0||o(e))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+e+".");s=e}}),r.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},r.prototype.setMaxListeners=function(e){if("number"!=typeof e||e<0||o(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this},r.prototype.getMaxListeners=function(){return c(this)},r.prototype.emit=function(e){for(var t=[],i=1;i<arguments.length;i++)t.push(arguments[i]);var o="error"===e,r=this._events;if(void 0!==r)o=o&&void 0===r.error;else if(!o)return!1;if(o){var s;if(t.length>0&&(s=t[0]),s instanceof Error)throw s;var a=new Error("Unhandled error."+(s?" ("+s.message+")":""));throw a.context=s,a}var c=r[e];if(void 0===c)return!1;if("function"==typeof c)n(c,this,t);else{var l=c.length,u=f(c,l);for(i=0;i<l;++i)n(u[i],this,t)}return!0},r.prototype.addListener=function(e,t){return l(this,e,t,!1)},r.prototype.on=r.prototype.addListener,r.prototype.prependListener=function(e,t){return l(this,e,t,!0)},r.prototype.once=function(e,t){return a(t),this.on(e,h(this,e,t)),this},r.prototype.prependOnceListener=function(e,t){return a(t),this.prependListener(e,h(this,e,t)),this},r.prototype.removeListener=function(e,t){var i,n,o,r,s;if(a(t),void 0===(n=this._events))return this;if(void 0===(i=n[e]))return this;if(i===t||i.listener===t)0==--this._eventsCount?this._events=Object.create(null):(delete n[e],n.removeListener&&this.emit("removeListener",e,i.listener||t));else if("function"!=typeof i){for(o=-1,r=i.length-1;r>=0;r--)if(i[r]===t||i[r].listener===t){s=i[r].listener,o=r;break}if(o<0)return this;0===o?i.shift():function(e,t){for(;t+1<e.length;t++)e[t]=e[t+1];e.pop()}(i,o),1===i.length&&(n[e]=i[0]),void 0!==n.removeListener&&this.emit("removeListener",e,s||t)}return this},r.prototype.off=r.prototype.removeListener,r.prototype.removeAllListeners=function(e){var t,i,n;if(void 0===(i=this._events))return this;if(void 0===i.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==i[e]&&(0==--this._eventsCount?this._events=Object.create(null):delete i[e]),this;if(0===arguments.length){var o,r=Object.keys(i);for(n=0;n<r.length;++n)"removeListener"!==(o=r[n])&&this.removeAllListeners(o);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(t=i[e]))this.removeListener(e,t);else if(void 0!==t)for(n=t.length-1;n>=0;n--)this.removeListener(e,t[n]);return this},r.prototype.listeners=function(e){return d(this,e,!0)},r.prototype.rawListeners=function(e){return d(this,e,!1)},r.listenerCount=function(e,t){return"function"==typeof e.listenerCount?e.listenerCount(t):p.call(e,t)},r.prototype.listenerCount=p,r.prototype.eventNames=function(){return this._eventsCount>0?t(this._events):[]}}},t={};function i(n){var o=t[n];if(void 0!==o)return o.exports;var r=t[n]={exports:{}};return e[n](r,r.exports,i),r.exports}i.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),(()=>{var e=i(187);const t={onAccountAuthenticate:"authentication:account-success",onPlayerConnect:"playerJoining",onPlayerDeath:"armoury:onPlayerDeath",onPlayerAuthenticate:"authentication:player-authenticated",onPlayerDisconnect:"playerDropped",onResourceStop:"onResourceStop",onContextMenuItemPressed:"armoury-overlay:context-menu-item-pressed",onPlayerEnterVehicle:"armoury:onPlayerEnterVehicle",onPlayerExitVehicle:"armoury:onPlayerExitVehicle",onPlayerClientsidedCacheLoaded:"armoury:player-resource-cache-loaded",onPlayerStartTowVehicle:"armoury:onPlayerStartTowVehicle",onPlayerStopTowVehicle:"armoury:onPlayerStopTowVehicle"};var n;!function(e){e[e.SERVER_TO_SERVER=0]="SERVER_TO_SERVER",e[e.SERVER_TO_CLIENT=1]="SERVER_TO_CLIENT",e[e.CLIENT_TO_SERVER=2]="CLIENT_TO_SERVER",e[e.CLIENT_TO_CLIENT=3]="CLIENT_TO_CLIENT"}(n||(n={}));const o=new Map,r=new Map,s=new Map;function a(e){return function(t){return class extends t{constructor(...a){super(...a),this.translationFile=null==e?void 0:e.translationFile,o.has(t)&&o.get(t).forEach((([e,t,i])=>{i===n.CLIENT_TO_CLIENT?on(t,super[e].bind(this)):onNet(t,super[e].bind(this))})),r.has(t)&&r.get(t).forEach((e=>{exports(e,super[e].bind(this))})),s.has(t)&&s.get(t).forEach((([e,t])=>{IsDuplicityVersion()?RegisterCommand(((null==t?void 0:t.isKeyBinding)?"+":"")+e.toLowerCase()+((null==t?void 0:t.suffix)||""),((n,o,r)=>{(null==t?void 0:t.adminLevelRequired)&&Number(i.g.exports.authentication.getPlayerInfo(n,"adminLevel"))<(null==t?void 0:t.adminLevelRequired)||super[e].call(this,n,o,r)}),!1):RegisterCommand(((null==t?void 0:t.isKeyBinding)?"+":"")+e.toLowerCase()+((null==t?void 0:t.suffix)||""),((t,i,n)=>{super[e].call(this,i,n)}),!1)}))}}}}function c(e){return function(i,r,s){const a=t[r]||(null==e?void 0:e.eventName),c=(null==e?void 0:e.direction)||n.CLIENT_TO_SERVER;(null==a?void 0:a.length)?(o.has(i.constructor)||o.set(i.constructor,[]),o.get(i.constructor).some((([e,t,i])=>e===r))||o.get(i.constructor).push([r,a,c])):console.error(`${r} is not recognized as a default event, thus this listener won't work. Please use the eventName property inside the data parameter.`)}}const l={0:[255,255,255],1:[224,50,50],2:[93,189,113],3:[93,182,229],4:[255,255,255],5:[238,198,78],6:[194,80,80],7:[156,110,175],8:[254,122,195],9:[245,157,121],10:[177,143,131],11:[141,206,167],12:[112,168,174],13:[211,209,231],14:[143,126,152],15:[106,196,191],16:[213,195,152],17:[234,142,80],18:[151,202,233],19:[178,98,135],20:[143,141,121],21:[166,117,94],22:[175,168,168],23:[231,141,154],24:[187,214,91],25:[12,123,86],26:[122,195,254],27:[171,60,230],28:[205,168,12],29:[69,97,171],30:[41,165,184],31:[184,155,123],32:[200,224,254],33:[240,240,150],34:[237,140,161],35:[249,138,138],36:[251,238,165],37:[255,255,255],38:[40,96,160],39:[145,131,112],40:[76,76,76],41:[242,157,157],42:[108,183,214],43:[175,237,174],44:[255,167,95],45:[241,241,241],46:[236,240,41],47:[255,154,24],48:[246,68,165],49:[224,58,58],50:[138,109,227],51:[255,127,70],52:[49,96,65],53:[179,221,243],54:[58,100,121],55:[160,160,160],56:[132,114,50],57:[101,185,231],58:[75,65,117],59:[225,59,59],60:[240,203,88],61:[205,63,152],62:[207,207,207],63:[39,106,159],64:[216,123,27],65:[142,131,147],66:[240,203,87],67:[101,185,231],68:[101,185,231],69:[121,205,121],70:[239,202,87],71:[239,202,87],72:[61,61,61],73:[239,202,87],74:[73,168,231],75:[224,50,50],76:[120,35,35],77:[101,185,231],78:[58,100,121],79:[224,50,50],80:[101,185,231],81:[242,164,12],82:[164,204,170],83:[168,84,242],84:[101,185,231],85:[61,61,61]},u=e=>new Promise((t=>setTimeout(t,e))),h=e=>e.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",");var d=function(e,t,i,n){var o,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(r<3?o(s):r>3?o(t,i,s):o(t,i))||s);return r>3&&s&&Object.defineProperty(t,i,s),s},p=function(e,t,i,n){return new(i||(i=Promise))((function(o,r){function s(e){try{c(n.next(e))}catch(e){r(e)}}function a(e){try{c(n.throw(e))}catch(e){r(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(s,a)}c((n=n.apply(e,t||[])).next())}))};let f=class extends class{constructor(){this.tickInstance=null,this.tickFunctions=[],this.routingBucket=0,this.assignBaseListeners()}addToTick(...e){e.forEach((e=>{-1!==this.tickFunctions.findIndex((t=>t.id===e.id))&&console.error(`[ClientBase]: A tick function with the id ${e.id} already exists in the stack! The newly added tick function will not be executed.`)})),this.tickFunctions.push(...e),this.removeTickDuplicates(),this.refreshTicks()}addToTickUnique(...e){e.forEach((e=>{this.removeFromTick(e.id)})),this.addToTick(...e)}removeFromTick(e){this.tickFunctions=this.tickFunctions.filter((t=>t.id!=e))}refreshTicks(){this.tickInstance&&(clearTick(this.tickInstance),this.tickInstance=null),this.tickFunctions.length>0&&(this.tickInstance=setTick((()=>{if(!this.tickFunctions.length)return clearTick(this.tickInstance),void(this.tickInstance=null);this.tickFunctions.forEach((e=>{e.function()}))})))}removeTickDuplicates(){this.tickFunctions=this.tickFunctions.filter((e=>this.tickFunctions.findIndex((t=>t.id==e.id))==this.tickFunctions.indexOf(e)))}assignBaseListeners(){onNet(`${GetCurrentResourceName()}:set-routing-bucket`,(e=>{this.routingBucket=e}))}setEntityRoutingBucket(e){TriggerServerEvent(`${GetCurrentResourceName()}:set-client-routing-bucket`,e),this.routingBucket=e}getPlayerInfo(e,t){let n=GetConvar(`${t||i.g.GetPlayerServerId(i.g.PlayerId())}_PI_${e}`,"-1");var o;return o=n.toString(),!/^\s*$/.test(o)&&(o=(o=(o=o.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@")).replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]")).replace(/(?:^|:|,)(?:\s*\[)+/g,""),/^[\],:{}\s]*$/.test(o))&&(n=JSON.parse(n.toString(),(function(e,t){return"object"==typeof t||isNaN(t)?t:Number(t)}))),n}}{constructor(){super(),this._blips=[],this._markers=[],this._vehicles=[],this._peds=[],this._waypoints=[],this._checkpoints=new Map,this.assignDefaultEntityListeners()}get blips(){return this._blips}get markers(){return this._markers}get vehicles(){return this._vehicles}get peds(){return this._peds}get waypoints(){return this._waypoints}get checkpoints(){return this._checkpoints}createBlips(e){const t=e.map((e=>Object.assign(Object.assign({},e),{instance:null})));this._blips.push(...t),this.refreshBlips()}createBlip(e){var t;const i=e.type&&"coords"!==e.type?"range"===e.type?AddBlipForRadius(e.pos[0],e.pos[1],e.pos[2],e.scale||1):AddBlipForEntity(null!==(t=e.entityId)&&void 0!==t?t:PlayerPedId()):AddBlipForCoord(e.pos[0],e.pos[1],e.pos[2]);return e.type&&"range"===e.type||SetBlipScale(i,e.scale||1),SetBlipSprite(i,e.id),SetBlipDisplay(i,4),SetBlipColour(i,e.color),SetBlipAlpha(i,e.alpha||255),SetBlipAsShortRange(i,!e.longRange),BeginTextCommandSetBlipName("STRING"),AddTextComponentString(e.title),EndTextCommandSetBlipName(i),i}clearBlip(e){this._blips=this._blips.filter((t=>t.instance!==e)),DoesBlipExist(e)&&RemoveBlip(e)}clearBlips(){this._blips.forEach((e=>{RemoveBlip(e.instance)})),this._blips=[]}refreshBlips(){this.blips.forEach((e=>{e.instance||(e.instance=this.createBlip(e))}))}createWaypoint(e,t,i,n,o,r=3){const s=GetCurrentResourceName().replace("-"," "),a=`${s.slice(0,1).toUpperCase()}${s.slice(1)}`,c=this.createBlip({id:n||1,color:i||69,title:t||a,pos:e,longRange:!0});return this.createCheckpoint(2,e[0],e[1],e[2],null,null,null,r,l[i][0],l[i][1],l[i][2],255,0),-1!==o&&(SetBlipRoute(c,!0),o&&SetBlipRouteColour(c,o)),this._waypoints.push(c),c}clearWaypoints(){this._waypoints.forEach((e=>{this.clearWaypoint(e,!0)})),this._waypoints=[]}clearWaypoint(e,t=!1){this.clearCheckpointByPosition(GetBlipCoords(e)),SetBlipRoute(e,!1),RemoveBlip(e),t||this._waypoints.splice(this._waypoints.indexOf(e),1)}createCheckpoint(e,t,i,n,o,r,s,a,c,l,u,h,d){const p=CreateCheckpoint(e,t,i,n,o,r,s,a,c,l,u,h,d);return this._checkpoints.set(p,[t,i,n,o,r,s]),p}clearCheckpoint(e){DeleteCheckpoint(e),this._checkpoints.has(e)&&this._checkpoints.delete(e)}clearCheckpointByPosition(e){const t=Array.from(this._checkpoints.keys()).find((t=>Math.floor(this._checkpoints.get(t)[0])===Math.floor(e[0])&&Math.floor(this._checkpoints.get(t)[1])===Math.floor(e[1])&&Math.floor(this._checkpoints.get(t)[2])===Math.floor(e[2])));t&&this.clearCheckpoint(t)}createMarkers(e){const t=e.map((e=>Object.assign(Object.assign({},e),{instance:null})));this._markers.push(...t)}clearMarkers(){this._markers=[]}createVehicleAsync(e,t,i,n,o,r,s,a=!1){return p(this,void 0,void 0,(function*(){let c=0;for(RequestModel(e);!HasModelLoaded(e);){if(c>10)return 0;yield u(100),c++}const l=CreateVehicle(e,t,i,n,o,r,s);return l&&(s&&this._vehicles.push(l),a&&TaskWarpPedIntoVehicle(GetPlayerPed(-1),l,-1)),l}))}removeVehicle(e){DoesEntityExist(e)&&DeleteEntity(e),this._vehicles.indexOf(e)>-1&&this._vehicles.splice(this._vehicles.indexOf(e),1)}removePed(e){DoesEntityExist(e)&&DeleteEntity(e),this._peds.indexOf(e)>-1&&this._peds.splice(this._peds.indexOf(e),1)}createPedInsideVehicleAsync(e,t,i,n,o,r){return p(this,void 0,void 0,(function*(){let s=0;for(RequestModel(i);!HasModelLoaded(i);){if(s>10)return 0;yield u(100),s++}const a=CreatePedInsideVehicle(e,t,i,n,o,r);return a&&this._peds.push(a),a}))}createPedAsync(e,t,i,n,o,r,s,a){return p(this,void 0,void 0,(function*(){let c=0;for(RequestModel(t);!HasModelLoaded(t);){if(c>10)return 0;yield u(100),c++}const l=CreatePed(e,t,i,n,o,r,s,a);return l&&this._peds.push(l),l}))}playAnimForPed(e,t,i,n,o=0,r=8,s=8){return p(this,void 0,void 0,(function*(){let a=0;for(RequestAnimDict(t);!HasAnimDictLoaded(t);){if(a>10)return;yield u(100),a++}HasAnimDictLoaded(t)&&TaskPlayAnim(e,t,i,r,s,n,o,0,!1,!1,!1)}))}setPedModelAsync(e,t){return p(this,void 0,void 0,(function*(){let i=0;for(RequestModel(t);!HasModelLoaded(t);){if(i>10)return!1;yield u(100),i++}SetPlayerModel(e,t),SetModelAsNoLongerNeeded(t)}))}assignDefaultEntityListeners(){onNet("onResourceStop",(e=>{e===GetCurrentResourceName()&&(this._vehicles.forEach((e=>{this.removeVehicle(e)})),this._peds.forEach((e=>{this.removePed(e)})),this._vehicles=[],this._peds=[])}))}onRefreshPlayersInVirtualWorld(){GetActivePlayers().forEach((e=>{const t=GetPlayerServerId(e);this.getPlayerInfo("virtualWorld")===this.getPlayerInfo("virtualWorld",t)?NetworkConcealPlayer(e,!1,!1):NetworkConcealPlayer(e,!0,!1)}))}};d([c({eventName:`${GetCurrentResourceName()}:refresh-virtual-world`})],f.prototype,"onRefreshPlayersInVirtualWorld",null),f=d([a()],f);var _=function(e,t,i,n){var o,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(r<3?o(s):r>3?o(t,i,s):o(t,i))||s);return r>3&&s&&Object.defineProperty(t,i,s),s};let y=class extends f{constructor(){super(...arguments),this.chunkRadius=75,this._actionPoints={},this._cachedPlayerPosition=[NaN,NaN],this._cachedPlayerRoundedPosition=[NaN,NaN],this._cachedIsPlayerInAnyVehicle=!1}get actionPoints(){return this._actionPoints}get cachedPlayerPosition(){return this._cachedPlayerPosition}createMarkers(e){super.createMarkers(e),this.createActionPoints(...e.map((e=>({id:`${GetCurrentResourceName()}_marker_${e.pos[0]}_${e.pos[1]}`,pos:e.pos,range:e.renderDistance,action:()=>{return t=this,i=void 0,o=function*(){var t,i,n;if(e.textureDict&&!HasStreamedTextureDictLoaded(e.textureDict))for(RequestStreamedTextureDict(e.textureDict,!0);!HasStreamedTextureDictLoaded(e.textureDict);)yield u(100);DrawMarker(e.marker,e.pos[0],e.pos[1],e.pos[2],0,0,0,(null===(t=e.rotation)||void 0===t?void 0:t[0])||0,(null===(i=e.rotation)||void 0===i?void 0:i[1])||0,(null===(n=e.rotation)||void 0===n?void 0:n[2])||0,e.scale,e.scale,e.scale,e.rgba[0],e.rgba[1],e.rgba[2],e.rgba[3],!1,!0,2,!1,e.textureDict||null,e.textureName||null,!1),e.underlyingCircle&&DrawMarker(e.underlyingCircle.marker,e.pos[0],e.pos[1],e.pos[2]-.9,0,0,0,0,0,0,e.underlyingCircle.scale,e.underlyingCircle.scale,e.underlyingCircle.scale,e.underlyingCircle.rgba[0]||e.rgba[0],e.underlyingCircle.rgba[1]||e.rgba[1],e.underlyingCircle.rgba[2]||e.rgba[2],e.underlyingCircle.rgba[3]||e.rgba[3],!1,!0,2,!1,null,null,!1)},new((n=void 0)||(n=Promise))((function(e,r){function s(e){try{c(o.next(e))}catch(e){r(e)}}function a(e){try{c(o.throw(e))}catch(e){r(e)}}function c(t){var i;t.done?e(t.value):(i=t.value,i instanceof n?i:new n((function(e){e(i)}))).then(s,a)}c((o=o.apply(t,i||[])).next())}));var t,i,n,o}}))))}clearMarkers(){this.markers.forEach((e=>{this.clearActionPoint(`${GetCurrentResourceName()}_marker_${e.pos[0]}_${e.pos[1]}`)})),super.clearMarkers()}createActionPoints(...e){e.forEach((e=>{this.createActionPoint(e)}))}createActionPoint(e){const t=this.roundToNearest(e.pos[0],this.chunkRadius),i=this.roundToNearest(e.pos[1],this.chunkRadius);this._actionPoints[t]||(this._actionPoints[t]={}),this.actionPoints[t][i]||(this._actionPoints[t][i]=[]),this._actionPoints[t][i].push(e)}clearActionPoint(e){Object.keys(this._actionPoints).forEach((t=>{Object.keys(this._actionPoints[t]).forEach((i=>{this._actionPoints[t][i]=this._actionPoints[t][i].filter((t=>t.id!=e))}))}))}clearActionPoints(){this._actionPoints={},this.removeFromTick(`${GetCurrentResourceName()}_actionpoints`)}actionPointExistsAtPosition(e,t,i){const n=this.roundToNearest(e,this.chunkRadius),o=this.roundToNearest(t,this.chunkRadius);if(this.actionPoints[n]&&this.actionPoints[n][o])return!!this.actionPoints[n][o].find((n=>n.pos[0]==e&&n.pos[1]==t&&n.pos[2]==i))}removeActionPoint(e){var t,i;(null===(i=null===(t=this._actionPoints[this.roundToNearest(e.pos[0],this.chunkRadius)])||void 0===t?void 0:t[this.roundToNearest(e.pos[1],this.chunkRadius)])||void 0===i?void 0:i.length)&&(this._actionPoints[this.roundToNearest(e.pos[0],this.chunkRadius)][this.roundToNearest(e.pos[1],this.chunkRadius)]=this._actionPoints[this.roundToNearest(e.pos[0],this.chunkRadius)][this.roundToNearest(e.pos[1],this.chunkRadius)].filter((t=>t.id!=e.id)))}onThreadTriggered(e){var t,i;if("chunk-checker"===e){this._cachedPlayerPosition=GetEntityCoords(PlayerPedId(),!0);const[e,n]=[this.roundToNearest(this._cachedPlayerPosition[0],this.chunkRadius),this.roundToNearest(this._cachedPlayerPosition[1],this.chunkRadius)];if(this._cachedPlayerRoundedPosition[0]==e&&this._cachedPlayerRoundedPosition[1]==n)return;this._cachedPlayerRoundedPosition=[e,n],this._cachedIsPlayerInAnyVehicle=IsPedInAnyVehicle(PlayerPedId(),!1),(null===(i=null===(t=this._actionPoints[this._cachedPlayerRoundedPosition[0]])||void 0===t?void 0:t[this._cachedPlayerRoundedPosition[1]])||void 0===i?void 0:i.length)?this.addToTickUnique({id:`${GetCurrentResourceName()}_actionpoints`,function:()=>{var e,t,i,n,o,r,s,a;for(let c=0;c<(null===(t=null===(e=this._actionPoints[this._cachedPlayerRoundedPosition[0]])||void 0===e?void 0:e[this._cachedPlayerRoundedPosition[1]])||void 0===t?void 0:t.length);c++){const e=null===(i=this._actionPoints[this._cachedPlayerRoundedPosition[0]])||void 0===i?void 0:i[this._cachedPlayerRoundedPosition[1]][c];if(o=[e.pos[0],e.pos[1],e.pos[2],this._cachedPlayerPosition[0],this._cachedPlayerPosition[1],e.pos[2]],r=void 0,s=void 0,a=void 0,r=o[3]-o[0],s=o[4]-o[1],a=o[5]-o[2],Math.hypot(r,s,a)<=(e.range||1)+(this._cachedIsPlayerInAnyVehicle&&!e.onfootOnly?5:0)){const t=(!e.onceIf||e.onceIf())&&(!e.onfootOnly||!IsPedInAnyVehicle(PlayerPedId(),!1))&&(!e.inVehicleOnly||IsPedInAnyVehicle(PlayerPedId(),!1));t&&e.action(),(e.once||e.onceIf)&&t&&(null===(n=this._actionPoints[this._cachedPlayerRoundedPosition[0]])||void 0===n||n[this._cachedPlayerRoundedPosition[1]].splice(c,1),c--)}}}}):this.removeFromTick(`${GetCurrentResourceName()}_actionpoints`)}}debug_ActionPoints(){var e,t;let i=0;const n=(null===(t=null===(e=this.actionPoints[this.roundToNearest(this._cachedPlayerPosition[0],this.chunkRadius)])||void 0===e?void 0:e[this.roundToNearest(this._cachedPlayerPosition[1],this.chunkRadius)])||void 0===t?void 0:t.length)||0;Object.keys(this.actionPoints).forEach((e=>{Object.keys(this.actionPoints[e]).forEach((t=>{i+=this.actionPoints[e][t].length}))})),console.log(`Total action points: ${i}. Action points in this area: ${n}`)}roundToNearest(e,t){return Math.round(e/t)*t}};var g;_([c({eventName:"armoury:thread-triggerer",direction:n.CLIENT_TO_CLIENT})],y.prototype,"onThreadTriggered",null),_([(g={suffix:`_${GetCurrentResourceName()}`},function(e,t,i){s.has(e.constructor)||s.set(e.constructor,[]),s.get(e.constructor).some((([e,i])=>e===t))||s.get(e.constructor).push([t,g||{}])})],y.prototype,"debug_ActionPoints",null),y=_([a()],y);class m extends y{addToFeed(e=8e3,...t){t.forEach(((t,i)=>{setTimeout((()=>{BeginTextCommandThefeedPost("STRING"),AddTextComponentSubstringPlayerName(t),EndTextCommandThefeedPostTicker(!1,!0)}),i*e)}))}}class v extends m{constructor(){super(...arguments),this._translationLanguage="en"}get translationLanguage(){return this._translationLanguage}translate(e,t){let i=this.translationFile[this._translationLanguage][e];return t&&Object.keys(t).forEach((e=>{i=i.replace(`{${e}}`,t[e])})),i}setTranslationLanguage(e){this._translationLanguage=e}}class P extends v{constructor(){super(),this.uiDisplay=!1,this.uiDisplayCooldownTimestamp=0,this.onIncomingUIMessageEvent=new e,this.addDefaultListeners()}isUIShowing(){return this.uiDisplay}isUIOnCooldown(){return Date.now()<this.uiDisplayCooldownTimestamp}showUI(e=!1,t=!1){this.isUIShowing()||(e||EnterCursorMode(),t||(SetNuiFocus(!0,!0),SetNuiFocusKeepInput(!1))),this.uiDisplay=!0,this.addToTickUnique({id:`${GetCurrentResourceName()}_UI`,function:()=>{DisableControlAction(0,1,this.uiDisplay),DisableControlAction(0,2,this.uiDisplay),DisableControlAction(0,142,this.uiDisplay),DisableControlAction(0,18,this.uiDisplay),DisableControlAction(0,322,this.uiDisplay),DisableControlAction(0,106,this.uiDisplay),this.uiDisplay||(this.removeFromTick(`${GetCurrentResourceName()}_UI`),SetNuiFocus(!1,!1))}})}hideUI(){this.uiDisplayCooldownTimestamp=Date.now()+3e3,LeaveCursorMode(),this.uiDisplay=!1,SendNuiMessage(JSON.stringify({type:"dismiss"}))}addUIListener(e){RegisterNuiCallbackType(e),on(`__cfx_nui:${e}`,((t,i)=>{this.onIncomingUIMessageEvent.emit(e,t),i("ok")})),this.onIncomingUIMessageEvent.on(e,(t=>{this.onIncomingUIMessage.call(this,e,t)}))}onIncomingUIMessage(e,t){}onForceShowUI(e,t=!1,i=!1){this.showUI(t,i)}onForceHideUI(){this.hideUI()}addDefaultListeners(){RegisterNuiCallbackType("dismiss"),on("__cfx_nui:dismiss",((e,t)=>{this.onForceHideUI(),TriggerServerEvent(`${GetCurrentResourceName()}:on-force-hidden`),emit(`${GetCurrentResourceName()}:on-force-hidden`),t("ok")})),onNet(`${GetCurrentResourceName()}:force-showui`,(e=>{this.onForceShowUI(e)})),onNet(`${GetCurrentResourceName()}:force-hideui`,(()=>{this.onForceHideUI()}))}}const b=[{pos:[346.5362548828125,-1012.4703369140625,-99.216796875],fridgePos:[343.90338134765625,-1001.1803588867188,-99.19627380371094]},{pos:[266.0835266113281,-1007.3274536132812,-101.019775390625]},{pos:[-14.334064483642578,-1440.5538330078125,31.099609375]}];let C=class extends P{constructor(){super(),this.assignListeners(),this.addUIListener("buttonclick"),this.addUIListener("dialogbuttonclick")}onForceShowUI(e){super.onForceShowUI(e),this.updateUIData(e)}onForceHideUI(){super.onForceHideUI()}updateUIData(e){e.owner,this.getPlayerInfo("name");const t=!e.owner,i=t?e.firstPurchasePrice:e.sellingPrice;let n="";n=t?this.translate("house_for_sale",{price:h(e.firstPurchasePrice),id:e.id.toString()}):this.translate("house_owned_by_player",{addition:e.sellingPrice?` - ${this.translate("for_sale")}!`:"",name:e.owner,id:e.id.toString()}),SendNuiMessage(JSON.stringify({type:"update",title:n,description:this.translate("house_purpose"),resource:GetCurrentResourceName(),buttons:[Object.assign({title:this.translate("purchase"),subtitle:e.owner?this.translate("house_contact_owner"):this.translate("house_purchase_for",{price:h(i)}),icon:"attach_money"},t||e.sellingPrice>0?Number(this.getPlayerInfo("cash"))<i?{disabled:!0,tooltip:this.translate("not_enough_money")}:!t&&e.ownerInstance<0?{disabled:!0,tooltip:this.translate("owner_not_in_city")}:{disabled:!1}:{disabled:!0,tooltip:this.translate("not_for_sale")}),Object.assign({title:this.translate("rent"),subtitle:e.rentPrice>0?this.translate("house_rent_for",{price:h(e.rentPrice)}):this.translate("house_rent"),icon:"bed"},t?{disabled:!0,tooltip:this.translate("house_not_owned")}:e.rentPrice?Number(this.getPlayerInfo("cash"))>e.rentPrice?{disabled:!1}:{disabled:!0,tooltip:this.translate("not_enough_money_for_rent")}:{disabled:!0,tooltip:this.translate("house_not_accepting_tenants")}),{title:this.translate("break_in"),subtitle:this.translate("attempt_break_lock"),icon:"door_back",disabled:!0,tooltip:this.translate("lockpicking_skill_low")}]}))}onIncomingUIMessage(e,t){if(super.onIncomingUIMessage(e,t),"buttonclick"===e)switch(t.buttonId){case 0:TriggerServerEvent(`${GetCurrentResourceName()}:request-purchase-house`);break;case 1:TriggerServerEvent(`${GetCurrentResourceName()}:request-become-tenant`)}"dialogbuttonclick"===e&&"purchase_unowned_house"===t.dialogId&&TriggerServerEvent(`${GetCurrentResourceName()}:confirm-purchase-house`,GetPlayerServerId(PlayerId()))}assignListeners(){onNet(`${GetCurrentResourceName()}:db-send-entities`,(e=>{this.clearMarkers(),this.clearBlips(),this.clearActionPoints(),e.forEach((e=>{const t=e.owner===this.getPlayerInfo("name"),i=!e.owner;if(this.createMarkers([{marker:9,pos:[e.entranceX,e.entranceY,e.entranceZ],rgba:t?[93,182,229,255]:[144,226,167,255],renderDistance:35,scale:.75,textureDict:"houses",textureName:"home_marker",rotation:[90,0,0],underlyingCircle:{marker:25,scale:1.75,rgba:t?[93,182,229,255]:[144,226,167,255]}}]),this.createBlips([{id:40,color:t?57:i?69:59,title:t?this.translate("blip_house_yours"):this.translate("blip_house_owned_unowned",{status:i?this.translate("unowned"):this.translate("owned")}),pos:[e.entranceX,e.entranceY,e.entranceZ]}]),this.createActionPoints({pos:[e.entranceX,e.entranceY,e.entranceZ],action:()=>{DisableControlAction(0,38,!0),DisableControlAction(0,68,!0),DisableControlAction(0,86,!0),DisableControlAction(0,29,!0),BeginTextCommandDisplayHelp("STRING"),AddTextComponentSubstringPlayerName(e.owner===GetPlayerName(-1)||e.tenantIds.includes(Number(this.getPlayerInfo("id")))?this.translate("tooltip_press_to_enter"):this.translate("tooltip_press_to_interact")),EndTextCommandDisplayHelp(0,!1,!0,1),IsDisabledControlJustPressed(0,38)&&ExecuteCommand("enterhouse")}}),!this.actionPointExistsAtPosition(e.exitX,e.exitY,e.exitZ)){const t=b.indexOf(b.find((t=>Math.floor(t.pos[0])===Math.floor(e.exitX)&&Math.floor(t.pos[1])===Math.floor(e.exitY)&&Math.floor(t.pos[2])===Math.floor(e.exitZ))));this.createActionPoints({pos:[e.exitX,e.exitY,e.exitZ],action:()=>{DisableControlAction(0,38,!0),DisableControlAction(0,68,!0),DisableControlAction(0,86,!0),DisableControlAction(0,244,!0),BeginTextCommandDisplayHelp("STRING"),AddTextComponentSubstringPlayerName(this.translate("tooltip_press_to_exit")),EndTextCommandDisplayHelp(0,!1,!0,1),IsDisabledControlJustPressed(0,38)&&ExecuteCommand("exithouse"),IsDisabledControlJustPressed(0,244)&&ExecuteCommand("housemenu")}},...b[t].fridgePos?[{pos:[b[t].fridgePos[0],b[t].fridgePos[1],b[t].fridgePos[2]],action:()=>{DisableControlAction(0,38,!0),DisableControlAction(0,68,!0),DisableControlAction(0,86,!0),DisableControlAction(0,244,!0),BeginTextCommandDisplayHelp("STRING"),AddTextComponentSubstringPlayerName(this.translate("tooltip_press_for_fridge")),EndTextCommandDisplayHelp(0,!1,!0,1),IsDisabledControlJustPressed(0,38)&&ExecuteCommand("checkfridge")}}]:[])}}))})),onNet(`${GetCurrentResourceName()}:show-dialog`,(e=>{SendNuiMessage(JSON.stringify({type:"opendialog",dialogdata:JSON.stringify(e)}))})),onNet(`${GetCurrentResourceName()}:house-purchased`,(()=>{this.hideUI()})),onNet(`${GetCurrentResourceName()}:house-became-tenant`,(()=>{this.hideUI()}))}};C=function(e,t,i,n){var o,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(r<3?o(s):r>3?o(t,i,s):o(t,i))||s);return r>3&&s&&Object.defineProperty(t,i,s),s}([a({translationFile:{en:{attempt_break_lock:"Attempt to break the lock",blip_house_owned_unowned:"House - {status}",blip_house_yours:"House - Your house",break_in:"Break in",for_sale:"For Sale",house_contact_owner:"Contact owner to purchase",house_for_sale:"House For Sale! (Price: ${price}) (#{id})",house_owned_by_player:"{name}'s House ({id}){addition}",house_not_accepting_tenants:"Doesn't accept tenants",house_not_owned:"House is not owned by anybody",house_purchase_for:"Purchase this house for ${price}.",house_purpose:"Houses offer you storage, security, a place to sleep, rent opportunities and more. Houses are automatically sold as a result of prolonged inactivity.",house_rent:"Rent a room in the house",house_rent_for:"Rent a room in the house for ${price}.",lockpicking_skill_low:"Lockpicking skill too low",not_enough_money:"You do not have enough money",not_enough_money_for_rent:"Not enough money for rent",not_for_sale:"Not for sale",owned:"Owned",owner_not_in_city:"Owner not yet in city",purchase:"Purchase",rent:"Rent",tooltip_press_for_fridge:"Press ~INPUT_PICKUP~ to check the fridge.",tooltip_press_to_enter:"Press ~INPUT_PICKUP~ to enter the house.",tooltip_press_to_exit:"Press ~INPUT_PICKUP~ to exit the house.~n~Press ~INPUT_INTERACTION_MENU~ to open up the house menu.",tooltip_press_to_interact:"Press ~INPUT_PICKUP~ to interact.",unowned:"Unowned"},ro:{attempt_break_lock:"Incearca spargerea incuietorii",blip_house_owned_unowned:"Casa - {status}",blip_house_yours:"Casa - Casa ta",break_in:"Sparge usa",for_sale:"De vanzare",house_contact_owner:"Contacteaza proprietarul pentru a cumpara",house_for_sale:"Casa de Vanzare! (Pret: ${price})",house_owned_by_player:"Casa lui {name} ({id}){addition}",house_not_accepting_tenants:"Nu se poate inchiria",house_not_owned:"Casa este nedetinuta",house_purchase_for:"Cumpara casa cu ${price}.",house_purpose:"Casele iti ofera securitate, spatiu de stocare, un loc pentru a dormi, oportunitati de chirie si altele. Casele sunt scoase la licitatie dupa o inactivitate prelungita in oras.",house_rent:"Inchiriaza o camera",house_rent_for:"Inchiriaza o camera pentru ${price}.",lockpicking_skill_low:"Skill spargere insuficient",not_enough_money:"Nu ai destui bani",not_enough_money_for_rent:"Nu ai destui bani",not_for_sale:"Nu este de vanzare",owned:"Detinuta",owner_not_in_city:"Detinatorul nu e in oras",purchase:"Cumpara",rent:"Inchiriaza",tooltip_press_for_fridge:"Apasa ~INPUT_PICKUP~ pentru a deschide frigiderul.",tooltip_press_to_enter:"Apasa ~INPUT_PICKUP~ pentru a intra.",tooltip_press_to_exit:"Apasa ~INPUT_PICKUP~ pentru a iesi.~n~Apasa ~INPUT_INTERACTION_MENU~ pentru a deschide meniul.",tooltip_press_to_interact:"Apasa ~INPUT_PICKUP~ pentru a interactiona.",unowned:"Nedetinuta"}}})],C),new C})()})();